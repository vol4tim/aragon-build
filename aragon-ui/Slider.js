"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=require("./extends-023d783e.js"),objectWithoutProperties=require("./objectWithoutProperties-c6d3675c.js"),getPrototypeOf=require("./getPrototypeOf-55c9e80c.js"),defineProperty=require("./defineProperty-3cad0327.js"),_styled=require("styled-components"),React=require("react"),index=require("./index-37353731.js"),web=require("./web-46d746d6.js"),Theme=require("./Theme.js"),css=require("./css.js"),springs=require("./springs.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./_commonjsHelpers-1b94f6bc.js"),require("./objectWithoutPropertiesLoose-1af20ad0.js"),require("react-dom"),require("./slicedToArray-a8a77f0e.js"),require("./unsupportedIterableToArray-f175acfa.js"),require("./theme-dark.js"),require("./theme-light.js"),require("./environment.js"),require("./miscellaneous.js"),require("./color.js"),require("./toConsumableArray-cc0d28a9.js");var _styled__default=_interopDefaultLegacy(_styled),React__default=_interopDefaultLegacy(React);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=getPrototypeOf.getPrototypeOf(e);if(t){var o=getPrototypeOf.getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return getPrototypeOf.possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var BAR_HEIGHT=6,HANDLE_SIZE=24,HANDLE_SHADOW_MARGIN=15,PADDING=5,MIN_WIDTH=10*HANDLE_SIZE,HEIGHT=Math.max(HANDLE_SIZE,BAR_HEIGHT)+2*PADDING,DEFAULT_RECT="undefined"==typeof window||"function"!=typeof window.DOMRect?{x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0}:new window.DOMRect,_StyledDiv=_styled__default.default("div").withConfig({displayName:"Slider___StyledDiv",componentId:"sc-94djfe-0"})(["min-width:","px;padding:0 ","px;",";"],MIN_WIDTH,(function(e){return e._css}),css.unselectable),_StyledDiv2=_styled__default.default("div").withConfig({displayName:"Slider___StyledDiv2",componentId:"sc-94djfe-1"})(["position:relative;height:","px;cursor:pointer;"],HEIGHT),_StyledAnimatedDiv=_styled__default.default(web.extendedAnimated.div).withConfig({displayName:"Slider___StyledAnimatedDiv",componentId:"sc-94djfe-2"})(["position:absolute;top:50%;left:0;width:","px;height:","px;border:1px solid ",";border-radius:50%;cursor:pointer;pointer-events:auto;"],HANDLE_SIZE,HANDLE_SIZE,(function(e){return e._css4})),Slider=function(e){getPrototypeOf.inherits(r,e);var t=_createSuper(r);function r(){var e;getPrototypeOf.classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"state",{pressed:!1}),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"handleRef",(function(t){e._mainElement=t,e._document=t&&t.ownerDocument})),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"getRect",(function(){var t=Date.now();return e._lastRect&&t-e._lastRectTime<1e3||(e._lastRectTime=t,e._lastRect=e._mainElement?e._mainElement.getBoundingClientRect():DEFAULT_RECT),e._lastRect})),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"dragStart",(function(t){e.dragStop();var r=e.clientXFromEvent(t);e.setState({pressed:!0},(function(){e.updateValueFromClientX(r)})),e._document.addEventListener("mouseup",e.dragStop),e._document.addEventListener("touchend",e.dragStop),e._document.addEventListener("mousemove",e.dragMove),e._document.addEventListener("touchmove",e.dragMove)})),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"dragStop",(function(){e.setState({pressed:!1}),e._document.removeEventListener("mouseup",e.dragStop),e._document.removeEventListener("touchend",e.dragStop),e._document.removeEventListener("mousemove",e.dragMove),e._document.removeEventListener("touchmove",e.dragMove)})),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"dragMove",(function(t){e.state.pressed&&e.updateValueFromClientX(e.clientXFromEvent(t))})),e}return getPrototypeOf.createClass(r,[{key:"componentWillUnmount",value:function(){this.dragStop()}},{key:"clientXFromEvent",value:function(e){return(e.touches?e.touches.item(0):e).clientX}},{key:"updateValueFromClientX",value:function(e){var t=this.getRect(),r=Math.min(t.width,Math.max(0,e-t.x));this.props.onUpdate(r/t.width)}},{key:"getHandleStyles",value:function(e){return{transform:e.interpolate((function(e){return"translate3d(0, calc(".concat(.5*e,"px - 50%), 0)")})),boxShadow:e.interpolate((function(e){return"0 1px 3px rgba(0, 0, 0, ".concat(.1-.02*e,")")})),background:e.interpolate((function(e){return"hsl(0, 0%, ".concat(100*(1-.01*e),"%)")}))}}},{key:"getHandlePositionStyles",value:function(e){return{transform:e.interpolate((function(e){return"translate3d(calc(".concat(100*e,"% + ").concat(HANDLE_SHADOW_MARGIN,"px), 0, 0)")}))}}},{key:"getActiveBarStyles",value:function(e,t){return{transform:e.interpolate((function(e){return"scaleX(".concat(e,") translateZ(0)")}))}}},{key:"render",value:function(){var e=this,t=this.state.pressed,r=this.props;r.onUpdate;var n=r.value,o=r.theme,a=objectWithoutProperties.objectWithoutProperties(r,["onUpdate","value","theme"]);return React__default.default.createElement(web.Spring,{native:!0,config:springs.springs.swift,to:{pressProgress:Number(t),value:Math.max(0,Math.min(1,n))}},(function(t){var r=t.value,n=t.pressProgress;return React__default.default.createElement(_StyledDiv,_extends._extends_1({},a,{_css:HANDLE_SIZE/2+PADDING}),React__default.default.createElement(_StyledDiv2,{ref:e.handleRef,onMouseDown:e.dragStart,onTouchStart:e.dragStart},React__default.default.createElement(Bars,null,React__default.default.createElement(_StyledBar,{_css2:o.surfaceUnder}),React__default.default.createElement(_StyledBar2,{style:e.getActiveBarStyles(r,n),_css3:o.selected})),React__default.default.createElement(HandleClip,null,React__default.default.createElement(HandlePosition,{style:e.getHandlePositionStyles(r,n)},React__default.default.createElement(_StyledAnimatedDiv,{style:e.getHandleStyles(n),_css4:o.border})))))}))}}]),r}(React__default.default.Component);defineProperty.defineProperty(Slider,"propTypes",{value:index.propTypes.number,onUpdate:index.propTypes.func,theme:index.propTypes.object}),defineProperty.defineProperty(Slider,"defaultProps",{value:0,onUpdate:function(){}});var Bars=_styled__default.default(web.extendedAnimated.div).withConfig({displayName:"Slider__Bars",componentId:"sc-94djfe-3"})(["position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);overflow:hidden;border-radius:2px;height:","px;"],BAR_HEIGHT),Bar=_styled__default.default(web.extendedAnimated.div).withConfig({displayName:"Slider__Bar",componentId:"sc-94djfe-4"})(["position:absolute;top:0;left:0;right:0;bottom:0;"]),_StyledBar2=_styled__default.default(Bar).withConfig({displayName:"Slider___StyledBar2",componentId:"sc-94djfe-5"})(["transform-origin:0 0;background:",";"],(function(e){return e._css3})),_StyledBar=_styled__default.default(Bar).withConfig({displayName:"Slider___StyledBar",componentId:"sc-94djfe-6"})(["background:",";"],(function(e){return e._css2})),HandleClip=_styled__default.default.div.withConfig({displayName:"Slider__HandleClip",componentId:"sc-94djfe-7"})(["pointer-events:none;overflow:hidden;width:calc(100% + ","px);height:calc(100% + ","px);transform-origin:50% 50%;transform:translate( -","px,-","px );"],HANDLE_SIZE+2*HANDLE_SHADOW_MARGIN,2*HANDLE_SHADOW_MARGIN,HANDLE_SIZE/2+HANDLE_SHADOW_MARGIN,HANDLE_SHADOW_MARGIN),HandlePosition=_styled__default.default(web.extendedAnimated.div).withConfig({displayName:"Slider__HandlePosition",componentId:"sc-94djfe-8"})(["width:calc(100% - ","px);height:100%;transform-origin:50% 50%;"],HANDLE_SIZE+2*HANDLE_SHADOW_MARGIN),Slider$1=function(e){var t=Theme.useTheme();return React__default.default.createElement(Slider,_extends._extends_1({theme:t},e))};exports.default=Slider$1;