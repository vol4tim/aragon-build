"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=require("./extends-023d783e.js"),objectWithoutProperties=require("./objectWithoutProperties-c6d3675c.js"),getPrototypeOf=require("./getPrototypeOf-55c9e80c.js"),defineProperty=require("./defineProperty-3cad0327.js"),React=require("react"),index=require("./index-37353731.js"),keycodes=require("./keycodes.js"),miscellaneous=require("./miscellaneous.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./_commonjsHelpers-1b94f6bc.js");var React__default=_interopDefaultLegacy(React);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=getPrototypeOf.getPrototypeOf(e);if(t){var o=getPrototypeOf.getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return getPrototypeOf.possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var EscapeOutside=function(e){getPrototypeOf.inherits(r,e);var t=_createSuper(r);function r(){var e;getPrototypeOf.classCallCheck(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"_element",React__default.default.createRef()),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"_document",null),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"handleClick",(function(t){var r=e.props.onEscapeOutside;e._element.contains(t.target)||r()})),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"handleEscape",(function(t){var r=e.props.onEscapeOutside;t.keyCode===keycodes.KEY_ESC&&r()})),e}return getPrototypeOf.createClass(r,[{key:"componentDidMount",value:function(){var e=this.props.useCapture;this._document=this._element.ownerDocument,this._document.addEventListener("keydown",this.handleEscape,e),this._document.addEventListener("click",this.handleClick,e),this._document.addEventListener("touchend",this.handleClick,e)}},{key:"componentWillUnmount",value:function(){var e=this.props.useCapture;this._document.removeEventListener("keydown",this.handleEscape,e),this._document.removeEventListener("click",this.handleClick,e),this._document.removeEventListener("touchend",this.handleClick,e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.children;t.onEscapeOutside,t.useCapture;var n=objectWithoutProperties.objectWithoutProperties(t,["children","onEscapeOutside","useCapture"]);return React__default.default.createElement("div",_extends._extends_1({},n,{ref:function(t){return e._element=t}}),r)}}]),r}(React__default.default.Component);defineProperty.defineProperty(EscapeOutside,"propTypes",{children:index.propTypes.node.isRequired,onEscapeOutside:index.propTypes.func.isRequired,useCapture:index.propTypes.bool}),defineProperty.defineProperty(EscapeOutside,"defaultProps",{onEscapeOutside:miscellaneous.noop,useCapture:!1}),exports.default=EscapeOutside;