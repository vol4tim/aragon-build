"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var defineProperty=require("./defineProperty-3cad0327.js"),slicedToArray=require("./slicedToArray-a8a77f0e.js"),_styled=require("styled-components"),React=require("react"),index=require("./index-37353731.js"),web=require("./web-46d746d6.js"),Checkbox=require("./Checkbox.js"),ToggleButton=require("./ToggleButton.js"),OpenedSurfaceBorder=require("./OpenedSurfaceBorder.js"),Theme=require("./Theme.js"),constants=require("./constants.js"),textStyles=require("./text-styles.js"),springs=require("./springs.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./unsupportedIterableToArray-f175acfa.js"),require("./_commonjsHelpers-1b94f6bc.js"),require("./objectWithoutPropertiesLoose-1af20ad0.js"),require("react-dom"),require("./extends-023d783e.js"),require("./objectWithoutProperties-c6d3675c.js"),require("./getPrototypeOf-55c9e80c.js"),require("./FocusVisible.js"),require("./miscellaneous.js"),require("./theme-dark.js"),require("./theme-light.js"),require("./environment.js"),require("./color.js"),require("./toConsumableArray-cc0d28a9.js"),require("./ButtonIcon.js"),require("./Button.js"),require("./index-c33eeeef.js"),require("./Layout.js"),require("./Viewport-71f7efe6.js"),require("./_baseGetTag-6ec23aaa.js"),require("./breakpoints.js"),require("./css.js"),require("./ButtonBase.js"),require("./keycodes.js"),require("./font.js"),require("./IconUp.js"),require("./IconPropTypes-b9997416.js"),require("./IconDown.js");var _styled__default=_interopDefaultLegacy(_styled),React__default=_interopDefaultLegacy(React);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){defineProperty.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _StyledDiv=_styled__default.default("div").withConfig({displayName:"ListView___StyledDiv",componentId:"sc-1wnrej-0"})(["position:relative;padding:0;padding-right:","px;padding-left:","px;border-bottom:","px solid ",";transition:background 150ms ease-in-out;background:",";"],(function(e){return e._css}),(function(e){return e._css2}),(function(e){return e._css3}),(function(e){return e._css4}),(function(e){return e._css5})),_StyledDiv2=_styled__default.default("div").withConfig({displayName:"ListView___StyledDiv2",componentId:"sc-1wnrej-1"})(["position:absolute;top:","px;left:0;display:flex;justify-content:center;width:","px;"],(function(e){return e._css6}),(function(e){return e._css7})),_StyledDiv3=_styled__default.default("div").withConfig({displayName:"ListView___StyledDiv3",componentId:"sc-1wnrej-2"})(["position:absolute;top:","px;right:","px;"],(function(e){return e._css8}),(function(e){return e._css9})),_StyledDiv4=_styled__default.default("div").withConfig({displayName:"ListView___StyledDiv4",componentId:"sc-1wnrej-3"})(["display:flex;flex-direction:column;padding-bottom:","px;"],(function(e){return e._css10})),_StyledDiv5=_styled__default.default("div").withConfig({displayName:"ListView___StyledDiv5",componentId:"sc-1wnrej-4"})(["display:flex;align-items:center;margin:","px 0 ","px;color:",";",";"],(function(e){return e._css11}),(function(e){return e._css12}),(function(e){return e._css13}),(function(e){return e._css14}));function ListView(e){e.allSelected;var t=e.entries,n=e.fields,r=e.hasAnyExpansion,i=e.onSelect;e.onSelectAll,e.renderSelectionCount;var s=e.selectable,o=e.rowHeight,c=Theme.useTheme(),a=React.useState(-1),u=slicedToArray.slicedToArray(a,2),d=u[0],l=u[1],f=React.useCallback((function(e){l((function(t){return t===e?-1:e}))}),[]),p=s||r;return React__default.default.createElement(React__default.default.Fragment,null,t.map((function(e,r){var a=e.expansion.content.length>0;return React__default.default.createElement(_StyledDiv,{key:r,_css:3*constants.GU,_css2:(p?6.5:3)*constants.GU,_css3:Number(r!==t.length-1),_css4:c.border,_css5:e.selected?c.surfaceSelected:"none"},React__default.default.createElement(OpenedSurfaceBorder.OpenedSurfaceBorder,{opened:e.index===d}),p&&React__default.default.createElement(_StyledDiv2,{_css6:1.5*constants.GU,_css7:6.5*constants.GU},s&&React__default.default.createElement(Select,{index:e.index,selected:e.selected,onSelect:i}),!s&&a&&React__default.default.createElement(ToggleButton.ToggleButton,{opened:e.index===d,onClick:function(){return f(e.index)}})),e.actions&&React__default.default.createElement(_StyledDiv3,{_css8:2*constants.GU,_css9:3*constants.GU},e.actions),React__default.default.createElement("div",null,e.entryNodes.map((function(e,t){return[e,n[t].label,n[t].priority&&n[t].priority||0]})).sort((function(e,t){return t[2]-e[2]})).map((function(e,t,n){var r=slicedToArray.slicedToArray(e,2),i=r[0],s=r[1];return React__default.default.createElement(_StyledDiv4,{key:t,_css10:t===n.length-1?2*constants.GU:0},React__default.default.createElement(_StyledDiv5,{_css11:2*constants.GU,_css12:1*constants.GU,_css13:c.surfaceContentSecondary,_css14:textStyles.textStyle("label2")},s),React__default.default.createElement("div",null,i))}))),a&&React__default.default.createElement(EntryExpansion,{expansion:e.expansion,opened:d===e.index,rowHeight:o}))})))}ListView.propTypes={allSelected:index.propTypes.oneOf([-1,0,1]).isRequired,entries:index.propTypes.array.isRequired,fields:index.propTypes.array.isRequired,hasAnyExpansion:index.propTypes.bool.isRequired,onSelect:index.propTypes.func.isRequired,onSelectAll:index.propTypes.func.isRequired,renderSelectionCount:index.propTypes.func.isRequired,rowHeight:index.propTypes.number.isRequired,selectable:index.propTypes.bool.isRequired};var _StyledAnimatedDiv=_styled__default.default(web.extendedAnimated.div).withConfig({displayName:"ListView___StyledAnimatedDiv",componentId:"sc-1wnrej-5"})(["overflow:hidden;background:",";margin-left:","px;margin-right:","px;padding-left:","px;box-shadow:inset 0 6px 4px -4px rgba(0,0,0,0.16);"],(function(e){return e._css15}),(function(e){return e._css16}),(function(e){return e._css17}),(function(e){return e._css18})),_StyledDiv6=_styled__default.default("div").withConfig({displayName:"ListView___StyledDiv6",componentId:"sc-1wnrej-6"})(["display:flex;align-items:center;height:",";padding-right:","px;"],(function(e){return e._css19}),(function(e){return e._css20}));function EntryExpansion(e){var t=e.expansion,n=e.opened,r=e.rowHeight,i=Theme.useTheme(),s=React.useState(0),o=slicedToArray.slicedToArray(s,2),c=o[0],a=o[1],u=React.useCallback((function(e){e&&a(e.getBoundingClientRect().height)}),[]),d=t.freeLayout?c:r*t.content.length;return React__default.default.createElement(web.Transition,{native:!0,items:n,from:{height:0},enter:{height:d},update:{height:d},leave:{height:0},config:_objectSpread(_objectSpread({},springs.springs.smooth),{},{precision:.1})},(function(e){return e&&function(e){var n=e.height;return React__default.default.createElement(_StyledAnimatedDiv,{style:{height:n.interpolate((function(e){return"".concat(e,"px")}))},_css15:i.surfaceUnder,_css16:-6.5*constants.GU,_css17:-3*constants.GU,_css18:6.5*constants.GU},t.content.map((function(e,n){return React__default.default.createElement(_StyledDiv6,{key:n,ref:t.freeLayout?u:null,_css19:t.freeLayout?"auto":"".concat(r,"px"),_css20:3*constants.GU},e)})))}}))}function Select(e){var t=e.index,n=e.selected,r=e.onSelect,i=React.useCallback((function(e){r(t,e)}),[t,r]);return React__default.default.createElement(Checkbox.default,{onChange:i,checked:n})}exports.ListView=ListView;