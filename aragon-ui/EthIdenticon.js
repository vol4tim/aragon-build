"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=require("./extends-023d783e.js"),getPrototypeOf=require("./getPrototypeOf-55c9e80c.js"),defineProperty=require("./defineProperty-3cad0327.js"),React=require("react"),index=require("./index-37353731.js"),_styled=require("styled-components"),_commonjsHelpers=require("./_commonjsHelpers-1b94f6bc.js"),web3=require("./web3-4ef44cda.js"),components=require("./components.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./environment.js"),require("./miscellaneous.js"),require("./toConsumableArray-cc0d28a9.js"),require("./unsupportedIterableToArray-f175acfa.js");var React__default=_interopDefaultLegacy(React),_styled__default=_interopDefaultLegacy(_styled),main=_commonjsHelpers.createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=a(React__default.default),i=a(index.propTypes);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.generateIdenticon=r.generateIdenticon.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React__default.default.Component),n(t,[{key:"componentDidMount",value:function(){this.generateIdenticon(r({},this.props))}},{key:"componentWillUpdate",value:function(e){this.isEquivalent(this.props,e)||this.generateIdenticon(r({},e))}},{key:"isEquivalent",value:function(e,t){var r=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t);if(r.length!=n.length)return!1;for(var o=0;o<r.length;o++){var i=r[o];if(e[i]!==t[i])return!1}return!0}},{key:"generateIdenticon",value:function(e){var t=new Array(4);function r(){var e=t[0]^t[0]<<11;return t[0]=t[1],t[1]=t[2],t[2]=t[3],t[3]=t[3]^t[3]>>19^e^e>>8,(t[3]>>>0)/(1<<31>>>0)}function n(){return"hsl("+Math.floor(360*r())+","+(60*r()+40)+"%,"+25*(r()+r()+r()+r())+"%)"}var o=e||{},i=o.size||8,a=o.scale||4;!function(e){for(var r=0;r<t.length;r++)t[r]=0;for(var n=0;n<e.length;n++)t[n%4]=(t[n%4]<<5)-t[n%4]+e.charCodeAt(n)}(o.seed||Math.floor(Math.random()*Math.pow(10,16)).toString(16));var s=o.color||n(),c=o.bgColor||n(),l=o.spotColor||n(),u=function(e){for(var t=e,n=e,o=Math.ceil(t/2),i=t-o,a=[],s=0;s<n;s++){for(var c=[],l=0;l<o;l++)c[l]=Math.floor(2.3*r());var u=c.slice(0,i);u.reverse(),c=c.concat(u);for(var f=0;f<c.length;f++)a.push(c[f])}return a}(i),f=function(e,t,r,n,o,i){var a=Math.sqrt(t.length),s=a*n;e.width=s,e.style.width=s+"px",e.height=s,e.style.height=s+"px";var c=e.getContext("2d");c.fillStyle=o,c.fillRect(0,0,e.width,e.height),c.fillStyle=r;for(var l=0;l<t.length;l++)if(c.fillStyle=1===t[l]?r:i,t[l]){var u=Math.floor(l/a),f=l%a;c.fillRect(f*n,u*n,n,n)}}(this.identicon,u,s,a,c,l);return f}},{key:"render",value:function(){var e=this;return o.default.createElement("canvas",{ref:function(t){e.identicon=t},className:this.props.className})}}]),t}();t.default=s,s.defaultProps={className:"identicon"},s.propTypes={seed:i.default.string.isRequired,size:i.default.number,scale:i.default.number,color:i.default.string,bgColor:i.default.string,spotColor:i.default.string}})),Blockies=_commonjsHelpers.unwrapExports(main);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=getPrototypeOf.getPrototypeOf(e);if(t){var o=getPrototypeOf.getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return getPrototypeOf.possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var PX_RATIO="undefined"==typeof devicePixelRatio?2:devicePixelRatio,BLOCKIES_SQUARES=8,BASE_SCALE=3,EthIdenticon=function(e){getPrototypeOf.inherits(r,e);var t=_createSuper(r);function r(){return getPrototypeOf.classCallCheck(this,r),t.apply(this,arguments)}return getPrototypeOf.createClass(r,[{key:"render",value:function(){var e=this.props,t=e.address,r=e.scale,n=e.radius,o=e.soften,i=r*BASE_SCALE;return web3.isAddress(t)?React__default.default.createElement(Main,_extends._extends_1({size:BLOCKIES_SQUARES*i,radius:n},components.stylingProps(this)),React__default.default.createElement(BlockiesScaling,{size:BLOCKIES_SQUARES*i*PX_RATIO},React__default.default.createElement(BlockiesOpacity,{soften:o},React__default.default.createElement(Blockies,{seed:t.toLowerCase(),size:BLOCKIES_SQUARES,scale:i*PX_RATIO})))):null}}]),r}(React__default.default.Component);defineProperty.defineProperty(EthIdenticon,"propTypes",{address:index.propTypes.string.isRequired,scale:index.propTypes.number,radius:index.propTypes.number,soften:index.propTypes.number}),defineProperty.defineProperty(EthIdenticon,"defaultProps",{scale:1,radius:0,soften:.3});var Main=_styled__default.default.div.withConfig({displayName:"EthIdenticon__Main",componentId:"sc-1h8gagr-0"})(["display:inline-flex;vertical-align:middle;overflow:hidden;width:","px;height:","px;border-radius:","px;mask-image:linear-gradient(red,red);"],(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.radius})),BlockiesOpacity=_styled__default.default.div.withConfig({displayName:"EthIdenticon__BlockiesOpacity",componentId:"sc-1h8gagr-1"})(["opacity:",";"],(function(e){return 1-e.soften})),BlockiesScaling=_styled__default.default.div.withConfig({displayName:"EthIdenticon__BlockiesScaling",componentId:"sc-1h8gagr-2"})(["display:flex;width:","px;height:","px;background:#fff;transform:scale(",",",");transform-origin:0 0;"],(function(e){return e.size}),(function(e){return e.size}),1/PX_RATIO,1/PX_RATIO);exports.default=EthIdenticon;