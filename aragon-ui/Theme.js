"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var slicedToArray=require("./slicedToArray-a8a77f0e.js"),defineProperty=require("./defineProperty-3cad0327.js"),React=require("react"),index=require("./index-37353731.js"),themeDark=require("./theme-dark.js"),themeLight=require("./theme-light.js"),environment=require("./environment.js"),color=require("./color.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./unsupportedIterableToArray-f175acfa.js"),require("./_commonjsHelpers-1b94f6bc.js"),require("./miscellaneous.js"),require("./getPrototypeOf-55c9e80c.js"),require("./toConsumableArray-cc0d28a9.js");var React__default=_interopDefaultLegacy(React);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){defineProperty.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var APPEARANCES=["dark","light"],EMBEDDED_THEMES={dark:themeDark.default,light:themeLight.default},THEME_DEFAULT="light",RESERVED_KEYS=["_appearance","_name"],DEPRECATED_COLORS=new Map([["error","negative"],["success","positive"]]),COLOR_FALLBACK="#FF00FF";function getTheme(e){var r=validateTheme(e);return null!==r?(environment.warnOnce("theme:theme-invalid:".concat(r),"Theme invalid: ".concat(r,". ")+"Using the theme “".concat(THEME_DEFAULT,"” instead.")),EMBEDDED_THEMES[THEME_DEFAULT]):"string"==typeof e&&EMBEDDED_THEMES[e]?EMBEDDED_THEMES[e]:_objectSpread(_objectSpread({},EMBEDDED_THEMES["dark"===e._appearance?"dark":"light"]),e)}var ThemeContext=React__default.default.createContext(prepareTheme(getTheme(THEME_DEFAULT)));function convertThemeColor(e,r){if(RESERVED_KEYS.includes(e))return r;try{return color.default(r)}catch(e){return color.default(COLOR_FALLBACK)}}function prepareTheme(e){var r=Object.fromEntries(Object.entries(e).filter((function(e){var r=slicedToArray.slicedToArray(e,1)[0];return!!EMBEDDED_THEMES[THEME_DEFAULT][r]||(environment.warnOnce("theme:invalid:".concat(r),"Theme: the color “".concat(r,"” is invalid and will be ignored. ")+"Please check src/theme/theme-light.js in the aragonUI repository for a list of valid colors."),!1)})).map((function(e){var r=slicedToArray.slicedToArray(e,2),t=r[0];return[t,convertThemeColor(t,r[1])]})));return new Proxy(r,{get:function(e,r){return DEPRECATED_COLORS.has(r)?(environment.warnOnce("theme:deprecated:".concat(r),"useTheme(): the color “".concat(r,"” has been deprecated and will be removed soon. ")+"Please use “".concat(DEPRECATED_COLORS.get(r),"” instead.")),e[DEPRECATED_COLORS.get(r)]):e[r]?e[r]:(environment.warnOnce("theme:unknown:".concat(r),"useTheme(): the color “".concat(r,"” doesn’t exist in the theme.")),COLOR_FALLBACK)}})}function validateTheme(e){return"string"==typeof e?EMBEDDED_THEMES[e]?null:"the theme “".concat(e,"” doesn’t exist"):e&&!e._name?"the “_name” key of the theme is missing":e&&!APPEARANCES.includes(e._appearance)?"the “_appearance” key of the theme is missing":null}function Theme(e){var r=e.theme,t=e.children;void 0===r&&(r=THEME_DEFAULT);var n=React.useMemo((function(){return prepareTheme(getTheme(r))}),[r]);return React__default.default.createElement(ThemeContext.Provider,{value:n},t)}function useTheme(){return React.useContext(ThemeContext)}Theme.propTypes={children:index.propTypes.node,theme:index.propTypes.oneOfType([index.propTypes.object,index.propTypes.string])},Theme.THEME_DEFAULT=THEME_DEFAULT,Theme.EMBEDDED_THEMES=EMBEDDED_THEMES,exports.Theme=Theme,exports.useTheme=useTheme;