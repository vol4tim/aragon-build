"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=require("./extends-023d783e.js"),getPrototypeOf=require("./getPrototypeOf-55c9e80c.js"),defineProperty=require("./defineProperty-3cad0327.js"),toConsumableArray=require("./toConsumableArray-cc0d28a9.js"),_styled=require("styled-components"),React=require("react"),index=require("./index-37353731.js"),_baseGetTag=require("./_baseGetTag-6ec23aaa.js"),dayjs_min=require("./dayjs.min-ac79806e.js"),date=require("./date.js"),Theme=require("./Theme.js"),IconClock=require("./IconClock.js"),Redraw=require("./Redraw-ec0ae004.js"),textStyles=require("./text-styles.js"),css=require("./css.js"),constants=require("./constants.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./_commonjsHelpers-1b94f6bc.js"),require("./unsupportedIterableToArray-f175acfa.js"),require("./slicedToArray-a8a77f0e.js"),require("./theme-dark.js"),require("./theme-light.js"),require("./environment.js"),require("./miscellaneous.js"),require("./color.js"),require("./objectWithoutProperties-c6d3675c.js"),require("./IconPropTypes-b9997416.js"),require("./index-c33eeeef.js"),require("./getDisplayName-7f913e84.js"),require("./font.js");var _styled__default=_interopDefaultLegacy(_styled),React__default=_interopDefaultLegacy(React),asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!_baseGetTag.isObject_1(e))return!1;var t=_baseGetTag._baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction,coreJsData=_baseGetTag._root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=function(){var e=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(e){if(null!=e){try{return funcToString$1.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$2=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$2=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$2).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!_baseGetTag.isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var a=_getValue(e,t);return _baseIsNative(a)?a:void 0}var _getNative=getNative,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var a=t[e];return a===HASH_UNDEFINED$1?void 0:a}return hasOwnProperty$1.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var a=e.length;a--;)if(eq_1(e[a][0],t))return a;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,a=_assocIndexOf(t,e);return!(a<0||(a==t.length-1?t.pop():splice.call(t,a,1),--this.size,0))}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,a=_assocIndexOf(t,e);return a<0?void 0:t[a][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return _assocIndexOf(this.__data__,e)>-1}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var a=this.__data__,r=_assocIndexOf(a,e);return r<0?(++this.size,a.push([e,t])):a[r][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache,Map=_getNative(_baseGetTag._root,"Map"),_Map=Map;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var a=e.__data__;return _isKeyable(t)?a["string"==typeof t?"string":"hash"]:a.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var a=_getMapData(this,e),r=a.size;return a.set(e,t),this.size+=a.size==r?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var a=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=a.cache;if(s.has(n))return s.get(n);var o=e.apply(this,r);return a.cache=s.set(n,o)||s,o};return a.cache=new(memoize.Cache||_MapCache),a}memoize.Cache=_MapCache;var memoize_1=memoize;function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var a,r=getPrototypeOf.getPrototypeOf(e);if(t){var n=getPrototypeOf.getPrototypeOf(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return getPrototypeOf.possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var RENDER_EVERY=1e3,formatUnit=function(e){return String(e).padStart(2,"0")},formats={yMdhms:"yMdhms",yMdhm:"yMdhm",yMdh:"yMdh",yMd:"yMd",yM:"yM",Mdhms:"Mdhms",Mdhm:"Mdhm",Mdh:"Mdh",Md:"Md",dhms:"dhms",dhm:"dhm",hms:"hms",hm:"hm",ms:"ms",m:"m",s:"s"},unitNames={y:"years",M:"months",d:"days",h:"hours",m:"minutes",s:"seconds"},getFormat=memoize_1((function(e){return["y","M","d","h","m","s"].reduce((function(t,a){return formats[e].includes(a)?[].concat(toConsumableArray.toConsumableArray(t),[unitNames[a]]):t}),[])}));function getTime(e,t,a,r,n){var s=t||new Date,o=t?new Date:e,i=dayjs_min.dayjs_min(s).diff(o,"seconds"),c=date.difference(s,o,{keepLeadingZeros:r,maxUnits:n,units:getFormat(a)});return{units:[["Y",c.years],["M",c.months],["D",c.days],["H",c.hours],["M",c.minutes],["S",c.seconds]],totalInSeconds:i}}var _StyledTime=_styled__default.default("time").withConfig({displayName:"Timer___StyledTime",componentId:"sc-58hkwl-0"})(["display:flex;align-items:center;white-space:nowrap;",";",";"],(function(e){return e._css}),(function(e){return e._css2})),_StyledSpan=_styled__default.default("span").withConfig({displayName:"Timer___StyledSpan",componentId:"sc-58hkwl-1"})(["display:flex;align-items:center;margin-right:","px;margin-top:-3px;"],(function(e){return e._css3})),_StyledIconTime=_styled__default.default(IconClock.default).withConfig({displayName:"Timer___StyledIconTime",componentId:"sc-58hkwl-2"})(["color:",";"],(function(e){return e._css4})),_StyledSpan2=_styled__default.default("span").withConfig({displayName:"Timer___StyledSpan2",componentId:"sc-58hkwl-3"})(["",";color:",";"],(function(e){return e._css5}),(function(e){return e._css6})),_StyledSpan3=_styled__default.default("span").withConfig({displayName:"Timer___StyledSpan3",componentId:"sc-58hkwl-4"})(["color:",";",";"],(function(e){return e._css7}),(function(e){return e._css8})),_StyledSpan4=_styled__default.default("span").withConfig({displayName:"Timer___StyledSpan4",componentId:"sc-58hkwl-5"})(["margin-left:2px;color:",";"],(function(e){return e._css9})),_StyledSpan5=_styled__default.default("span").withConfig({displayName:"Timer___StyledSpan5",componentId:"sc-58hkwl-6"})(["margin:0 4px;color:",";font-weight:400;"],(function(e){return e._css10})),Timer=function(e){getPrototypeOf.inherits(a,e);var t=_createSuper(a);function a(){var e;getPrototypeOf.classCallCheck(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n)),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"renderTime",(function(){var t=e.props,a=t.start,r=t.end,n=t.theme,s=getTime(a,r,t.format,t.showEmpty,t.maxUnits),o=s.totalInSeconds,i=s.units;if(o<0||Object.is(o,-0))return React__default.default.createElement(_StyledSpan2,{_css5:textStyles.textStyle("body2"),_css6:n.surfaceContentSecondary},r?"Time out":"−");var c=i.reduce((function(e,t,a){return null===t[1]?e:a}),0);return React__default.default.createElement("span",null,i.map((function(e,t){var a=t===c,r=t===i.length-1,s=t>=i.length-3;return null===e[1]?null:React__default.default.createElement(React__default.default.Fragment,{key:t},React__default.default.createElement(_StyledSpan3,{_css7:n.surfaceContent,_css8:r&&"\n                      display: inline-flex;\n                      align-items: baseline;\n                      justify-content: space-between;\n                      min-width: 31px;\n                    "},formatUnit(e[1]),React__default.default.createElement(_StyledSpan4,{_css9:n.surfaceContentSecondary},e[0])),!a&&React__default.default.createElement(_StyledSpan5,{_css10:n.surfaceContentSecondary},s&&":"))})))})),e}return getPrototypeOf.createClass(a,[{key:"render",value:function(){var e=this.props,t=e.end,a=e.start,r=e.showIcon,n=e.theme;return React__default.default.createElement(_StyledTime,{dateTime:date.formatHtmlDatetime(t||a),_css:css.unselectable(),_css2:textStyles.textStyle("body2")},r&&React__default.default.createElement(_StyledSpan,{_css3:.5*constants.GU},React__default.default.createElement(_StyledIconTime,{_css4:n.surfaceIcon})),React__default.default.createElement(Redraw.Redraw,{interval:RENDER_EVERY},this.renderTime))}}]),a}(React__default.default.Component);defineProperty.defineProperty(Timer,"propTypes",{end:index.propTypes.instanceOf(Date),format:index.propTypes.oneOf(Object.keys(formats)),maxUnits:index.propTypes.number,showEmpty:index.propTypes.bool,showIcon:index.propTypes.bool,start:index.propTypes.instanceOf(Date),theme:index.propTypes.object}),defineProperty.defineProperty(Timer,"defaultProps",{format:formats.yMdhms,maxUnits:-1,showEmpty:!1,showIcon:!0});var Timer$1=function(e){var t=Theme.useTheme();return React__default.default.createElement(Timer,_extends._extends_1({},e,{theme:t}))};exports.default=Timer$1;