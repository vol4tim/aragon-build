"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=require("./extends-023d783e.js"),objectWithoutProperties=require("./objectWithoutProperties-c6d3675c.js"),_styled=require("styled-components"),React=require("react"),index=require("./index-37353731.js"),TextInput=require("./TextInput.js"),ButtonIcon=require("./ButtonIcon.js"),ToastHub=require("./ToastHub.js"),Theme=require("./Theme.js"),IconCopy=require("./IconCopy.js"),constants=require("./constants.js"),environment=require("./environment.js"),textStyles=require("./text-styles.js"),miscellaneous=require("./miscellaneous.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./_commonjsHelpers-1b94f6bc.js"),require("./defineProperty-3cad0327.js"),require("./Button.js"),require("./slicedToArray-a8a77f0e.js"),require("./unsupportedIterableToArray-f175acfa.js"),require("./index-c33eeeef.js"),require("./Layout.js"),require("./Viewport-71f7efe6.js"),require("./getPrototypeOf-55c9e80c.js"),require("./_baseGetTag-6ec23aaa.js"),require("./breakpoints.js"),require("./css.js"),require("./ButtonBase.js"),require("./FocusVisible.js"),require("./keycodes.js"),require("./theme-dark.js"),require("./theme-light.js"),require("./color.js"),require("./toConsumableArray-cc0d28a9.js"),require("./font.js"),require("./web-46d746d6.js"),require("./objectWithoutPropertiesLoose-1af20ad0.js"),require("react-dom"),require("./RootPortal.js"),require("./Root-07f851a6.js"),require("./components.js"),require("./springs.js"),require("./IconPropTypes-b9997416.js");var _styled__default=_interopDefaultLegacy(_styled),React__default=_interopDefaultLegacy(React),HEIGHT=5*constants.GU,_StyledDiv=_styled__default.default("div").withConfig({displayName:"TextCopy___StyledDiv",componentId:"sc-1dg1uit-0"})(["position:relative;display:inline-flex;width:","px;max-width:100%;height:","px;padding-left:",";"],(function(e){return e._css}),HEIGHT,(function(e){return e._css2})),_StyledDiv2=_styled__default.default("div").withConfig({displayName:"TextCopy___StyledDiv2",componentId:"sc-1dg1uit-1"})(["position:absolute;top:0;left:0;overflow:hidden;width:","px;height:","px;background:",";border:1px solid ",";border-right:0;border-radius:","px 0.0001px 0.0001px ","px;"],HEIGHT,HEIGHT,(function(e){return e._css3}),(function(e){return e._css4}),constants.RADIUS,constants.RADIUS),_StyledDiv3=_styled__default.default("div").withConfig({displayName:"TextCopy___StyledDiv3",componentId:"sc-1dg1uit-2"})(["display:flex;align-items:center;justify-content:center;width:","px;height:","px;"],(function(e){return e._css5}),(function(e){return e._css6})),_StyledButtonIcon=_styled__default.default(ButtonIcon.default).withConfig({displayName:"TextCopy___StyledButtonIcon",componentId:"sc-1dg1uit-3"})(["width:","px;height:","px;border-radius:0;color:",";"],(function(e){return e._css7}),(function(e){return e._css8}),(function(e){return e._css9})),_StyledTextInput=_styled__default.default(TextInput.default).withConfig({displayName:"TextCopy___StyledTextInput",componentId:"sc-1dg1uit-4"})(["text-overflow:ellipsis;height:","px;max-width:100%;border:1px solid ",";",";",";&:read-only{color:",";text-shadow:none;}"],HEIGHT,(function(e){return e._css10}),(function(e){return e._css11}),(function(e){return e._css12}),(function(e){return e._css13})),TextCopy=React__default.default.memo(React__default.default.forwardRef((function(e,t){var r=e.adornment,o=e.autofocus,s=e.message,n=e.monospace,u=e.onCopy,i=e.value,a=objectWithoutProperties.objectWithoutProperties(e,["adornment","autofocus","message","monospace","onCopy","value"]),c=Theme.useTheme(),d=ToastHub.useToast(),l=React.useRef(null);React.useImperativeHandle(t,(function(){return{focus:function(){l.current.focus()}}}));var p=React.useCallback((function(){l.current&&l.current.select()}),[]),f=void 0===u?d:u||miscellaneous.noop,_=React.useCallback((function(){if(l.current){l.current.focus();try{document.execCommand("copy"),f(s)}catch(e){environment.warn(e)}}}),[s,f]);return React__default.default.createElement(_StyledDiv,_extends._extends_1({},a,{_css:52.5*constants.GU,_css2:r?"".concat(HEIGHT,"px"):"0"}),r&&React__default.default.createElement(_StyledDiv2,{_css3:c.surface,_css4:c.border},React__default.default.createElement(_StyledDiv3,{_css5:HEIGHT-2,_css6:HEIGHT-2},r)),React__default.default.createElement(_StyledTextInput,{ref:l,adornment:React__default.default.createElement(_StyledButtonIcon,{onClick:_,label:"Copy",_css7:HEIGHT-2,_css8:HEIGHT-2,_css9:c.surfaceIcon},React__default.default.createElement(IconCopy.default,null)),adornmentPosition:"end",adornmentSettings:{width:HEIGHT-2,padding:0},autofocus:o,onFocus:p,readOnly:!0,value:i,wide:!0,_css10:c.border,_css11:r?"\n                  border-top-left-radius: 0;\n                  border-bottom-left-radius: 0;\n                  border-left: 0;\n                ":"",_css12:textStyles.textStyle(n?"address2":"body3"),_css13:c.surfaceContent}))})));TextCopy.propTypes={adornment:index.propTypes.node,autofocus:index.propTypes.bool,message:index.propTypes.string,monospace:index.propTypes.bool,onCopy:index.propTypes.func,value:index.propTypes.string},TextCopy.defaultProps={autofocus:!1,message:"Copied",monospace:!0},exports.default=TextCopy;