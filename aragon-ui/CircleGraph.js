"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var defineProperty=require("./defineProperty-3cad0327.js"),_styled=require("styled-components"),React=require("react"),index=require("./index-37353731.js"),web=require("./web-46d746d6.js"),Theme=require("./Theme.js"),math=require("./math-ecfd5d91.js"),environment=require("./environment.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./_commonjsHelpers-1b94f6bc.js"),require("./objectWithoutPropertiesLoose-1af20ad0.js"),require("react-dom"),require("./slicedToArray-a8a77f0e.js"),require("./unsupportedIterableToArray-f175acfa.js"),require("./theme-dark.js"),require("./theme-light.js"),require("./color.js"),require("./getPrototypeOf-55c9e80c.js"),require("./toConsumableArray-cc0d28a9.js"),require("./miscellaneous.js");var _styled__default=_interopDefaultLegacy(_styled),React__default=_interopDefaultLegacy(React);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){defineProperty.defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var STROKE_WIDTH=4,SIZE_DEFAULT=80;function labelDefault(e,t){var r={suffix:"%",value:String(Math.floor(100*e))},a=100*e,n=100*t;return n>0&&n<1&&a>0&&a<2?_objectSpread(_objectSpread({},r),{},{prefix:"<",value:"1"}):r}function labelCompat(e){return"string"==typeof e||"number"==typeof e||React__default.default.isValidElement(e)?(environment.warnOnce("CircleGraph:label:string","CircleGraph: the function passed to the label should not return a React node anymore: please check the CircleGraph documentation."),{value:String(e)}):e}var _StyledDiv=_styled__default.default("div").withConfig({displayName:"CircleGraph___StyledDiv",componentId:"sc-2a8gt2-0"})(["position:relative;display:flex;align-items:center;justify-content center;width:","px;height:","px;"],(function(e){return e._css}),(function(e){return e._css2})),_StyledSvg=_styled__default.default("svg").withConfig({displayName:"CircleGraph___StyledSvg",componentId:"sc-2a8gt2-1"})(["position:absolute;top:0;left:0;"]),_StyledAnimatedCircle=_styled__default.default(web.extendedAnimated.circle).withConfig({displayName:"CircleGraph___StyledAnimatedCircle",componentId:"sc-2a8gt2-2"})(["transform:rotate(270deg);transform-origin:50% 50%;"]),_StyledDiv2=_styled__default.default("div").withConfig({displayName:"CircleGraph___StyledDiv2",componentId:"sc-2a8gt2-3"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;line-height:1.2;"]),_StyledDiv3=_styled__default.default("div").withConfig({displayName:"CircleGraph___StyledDiv3",componentId:"sc-2a8gt2-4"})(["position:absolute;top:50%;left:0;right:0;transform:translateY(-50%);"]),_StyledDiv4=_styled__default.default("div").withConfig({displayName:"CircleGraph___StyledDiv4",componentId:"sc-2a8gt2-5"})(["display:flex;align-items:baseline;justify-content:center;"]),_StyledAnimatedDiv=_styled__default.default(web.extendedAnimated.div).withConfig({displayName:"CircleGraph___StyledAnimatedDiv",componentId:"sc-2a8gt2-6"})(["display:flex;color:",";"],(function(e){return e._css3})),_StyledAnimatedDiv2=_styled__default.default(web.extendedAnimated.div).withConfig({displayName:"CircleGraph___StyledAnimatedDiv2",componentId:"sc-2a8gt2-7"})(["position:absolute;top:100%;left:0;right:0;display:flex;justify-content:center;color:",";"],(function(e){return e._css4}));function CircleGraph(e){var t=e.color,r=e.label,a=e.size,n=e.strokeWidth,i=e.value,l=Theme.useTheme(),o=2*Math.PI*(a-n),d=(a-n)/2;void 0===r&&(r=labelDefault);var c=React.useCallback((function(e){return function(t){if("function"!=typeof r)return null;var a=math.clamp(t),n=labelCompat(r(a,i));return(void 0===n[e]?labelDefault(a,i)[e]:n[e])||""}}),[r,i]),s="function"==typeof t?t:function(){return t||l.accent};return React__default.default.createElement(web.Spring,{to:{progressValue:i},native:!0},(function(e){var t=e.progressValue;return React__default.default.createElement(_StyledDiv,{_css:a,_css2:a},React__default.default.createElement(_StyledSvg,{width:a,height:a,viewBox:"0 0 ".concat(a," ").concat(a)},React__default.default.createElement("circle",{cx:a/2,cy:a/2,r:d,style:{strokeWidth:n},fill:"none",stroke:l.border}),React__default.default.createElement(_StyledAnimatedCircle,{cx:a/2,cy:a/2,r:d,fill:"none",strokeLinecap:"round",strokeDasharray:o,strokeWidth:n,style:{stroke:t.interpolate(s),strokeDashoffset:t.interpolate((function(e){return o-o*e/2}))}})),React__default.default.createElement(_StyledDiv2,null,"function"!=typeof r?r:r&&React__default.default.createElement(_StyledDiv3,null,React__default.default.createElement(_StyledDiv4,null,React__default.default.createElement(web.extendedAnimated.div,{style:{fontSize:"".concat(.2*a,"px")}},t.interpolate(c("prefix"))),React__default.default.createElement(web.extendedAnimated.div,{style:{fontSize:"".concat(.25*a,"px")}},t.interpolate(c("value"))),React__default.default.createElement(_StyledAnimatedDiv,{style:{fontSize:"".concat(.13*a,"px")},_css3:l.surfaceContentSecondary},t.interpolate(c("suffix")))),React__default.default.createElement(_StyledAnimatedDiv2,{style:{fontSize:"".concat(.1*a,"px")},_css4:l.surfaceContentSecondary},t.interpolate(c("secondary"))))))}))}CircleGraph.propTypes={color:index.propTypes.oneOfType([index.propTypes.func,index.propTypes.string]),label:index.propTypes.oneOfType([index.propTypes.node,index.propTypes.func]),size:index.propTypes.number,strokeWidth:index.propTypes.number,value:index.propTypes.number.isRequired},CircleGraph.defaultProps={size:SIZE_DEFAULT,strokeWidth:STROKE_WIDTH},exports.default=CircleGraph;