import slicedToArray from"../../node_modules/@babel/runtime/helpers/slicedToArray.js";import{useState,useEffect,useMemo}from"react";import cachedMap from"../lib/cached-map.js";var srcCache=cachedMap();function useImageExists(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,t=useState(!1),s=slicedToArray(t,2),a=s[0],i=s[1],c=useState(!0),n=slicedToArray(c,2),o=n[0],u=n[1],l=useState(!1),m=slicedToArray(l,2),d=m[0],f=m[1];return useEffect((function(){var t=new Image,s=setTimeout((function(){return f(!0)}),r),a=function(){u(!1),i(!0),srcCache.set(e,!0),c()},c=function(){clearTimeout(s),t&&(t.removeEventListener("load",a),t=null)};return function(){if(!e)return i(!1),void u(!1);srcCache.get(e)?a():(i(!1),u(!0),t.addEventListener("load",a),t.src=e)}(),c}),[e,r]),useMemo((function(){return{src:e,displayFallback:d,exists:a,loading:o}}),[e,d,a,o])}var ImageExists=function(e){var r=e.timeUntilFallback,t=e.src;return(0,e.children)(useImageExists(t,r))};export{ImageExists,useImageExists};