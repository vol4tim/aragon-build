import defineProperty from"../../../node_modules/@babel/runtime/helpers/defineProperty.js";import _styled from"styled-components";import React,{useCallback}from"react";import propTypes from"../../../node_modules/prop-types/index.js";import{animated as extendedAnimated,Spring}from"../../../node_modules/react-spring/web.js";import{useTheme}from"../../theme/Theme2.js";import{clamp}from"../../utils/math.js";import{warnOnce}from"../../utils/environment.js";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var STROKE_WIDTH=4,SIZE_DEFAULT=80;function labelDefault(e,t){var r={suffix:"%",value:String(Math.floor(100*e))},n=100*e,i=100*t;return i>0&&i<1&&n>0&&n<2?_objectSpread(_objectSpread({},r),{},{prefix:"<",value:"1"}):r}function labelCompat(e){return"string"==typeof e||"number"==typeof e||React.isValidElement(e)?(warnOnce("CircleGraph:label:string","CircleGraph: the function passed to the label should not return a React node anymore: please check the CircleGraph documentation."),{value:String(e)}):e}var _StyledDiv=_styled("div").withConfig({displayName:"CircleGraph___StyledDiv",componentId:"sc-2a8gt2-0"})(["position:relative;display:flex;align-items:center;justify-content center;width:","px;height:","px;"],(function(e){return e._css}),(function(e){return e._css2})),_StyledSvg=_styled("svg").withConfig({displayName:"CircleGraph___StyledSvg",componentId:"sc-2a8gt2-1"})(["position:absolute;top:0;left:0;"]),_StyledAnimatedCircle=_styled(extendedAnimated.circle).withConfig({displayName:"CircleGraph___StyledAnimatedCircle",componentId:"sc-2a8gt2-2"})(["transform:rotate(270deg);transform-origin:50% 50%;"]),_StyledDiv2=_styled("div").withConfig({displayName:"CircleGraph___StyledDiv2",componentId:"sc-2a8gt2-3"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;line-height:1.2;"]),_StyledDiv3=_styled("div").withConfig({displayName:"CircleGraph___StyledDiv3",componentId:"sc-2a8gt2-4"})(["position:absolute;top:50%;left:0;right:0;transform:translateY(-50%);"]),_StyledDiv4=_styled("div").withConfig({displayName:"CircleGraph___StyledDiv4",componentId:"sc-2a8gt2-5"})(["display:flex;align-items:baseline;justify-content:center;"]),_StyledAnimatedDiv=_styled(extendedAnimated.div).withConfig({displayName:"CircleGraph___StyledAnimatedDiv",componentId:"sc-2a8gt2-6"})(["display:flex;color:",";"],(function(e){return e._css3})),_StyledAnimatedDiv2=_styled(extendedAnimated.div).withConfig({displayName:"CircleGraph___StyledAnimatedDiv2",componentId:"sc-2a8gt2-7"})(["position:absolute;top:100%;left:0;right:0;display:flex;justify-content:center;color:",";"],(function(e){return e._css4}));function CircleGraph(e){var t=e.color,r=e.label,n=e.size,i=e.strokeWidth,o=e.value,a=useTheme(),l=2*Math.PI*(n-i),c=(n-i)/2;void 0===r&&(r=labelDefault);var s=useCallback((function(e){return function(t){if("function"!=typeof r)return null;var n=clamp(t),i=labelCompat(r(n,o));return(void 0===i[e]?labelDefault(n,o)[e]:i[e])||""}}),[r,o]),p="function"==typeof t?t:function(){return t||a.accent};return React.createElement(Spring,{to:{progressValue:o},native:!0},(function(e){var t=e.progressValue;return React.createElement(_StyledDiv,{_css:n,_css2:n},React.createElement(_StyledSvg,{width:n,height:n,viewBox:"0 0 ".concat(n," ").concat(n)},React.createElement("circle",{cx:n/2,cy:n/2,r:c,style:{strokeWidth:i},fill:"none",stroke:a.border}),React.createElement(_StyledAnimatedCircle,{cx:n/2,cy:n/2,r:c,fill:"none",strokeLinecap:"round",strokeDasharray:l,strokeWidth:i,style:{stroke:t.interpolate(p),strokeDashoffset:t.interpolate((function(e){return l-l*e/2}))}})),React.createElement(_StyledDiv2,null,"function"!=typeof r?r:r&&React.createElement(_StyledDiv3,null,React.createElement(_StyledDiv4,null,React.createElement(extendedAnimated.div,{style:{fontSize:"".concat(.2*n,"px")}},t.interpolate(s("prefix"))),React.createElement(extendedAnimated.div,{style:{fontSize:"".concat(.25*n,"px")}},t.interpolate(s("value"))),React.createElement(_StyledAnimatedDiv,{style:{fontSize:"".concat(.13*n,"px")},_css3:a.surfaceContentSecondary},t.interpolate(s("suffix")))),React.createElement(_StyledAnimatedDiv2,{style:{fontSize:"".concat(.1*n,"px")},_css4:a.surfaceContentSecondary},t.interpolate(s("secondary"))))))}))}CircleGraph.propTypes={color:propTypes.oneOfType([propTypes.func,propTypes.string]),label:propTypes.oneOfType([propTypes.node,propTypes.func]),size:propTypes.number,strokeWidth:propTypes.number,value:propTypes.number.isRequired},CircleGraph.defaultProps={size:SIZE_DEFAULT,strokeWidth:STROKE_WIDTH};export default CircleGraph;