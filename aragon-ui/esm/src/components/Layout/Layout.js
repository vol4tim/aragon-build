import _extends_1 from"../../../node_modules/@babel/runtime/helpers/extends.js";import objectWithoutProperties from"../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js";import defineProperty from"../../../node_modules/@babel/runtime/helpers/defineProperty.js";import slicedToArray from"../../../node_modules/@babel/runtime/helpers/slicedToArray.js";import _styled from"styled-components";import React,{useContext,useMemo}from"react";import propTypes from"../../../node_modules/prop-types/index.js";import{useViewport}from"../../providers/Viewport/Viewport.js";import{GU}from"../../style/constants.js";import{cssPx}from"../../utils/css.js";import{BREAKPOINTS}from"../../style/breakpoints.js";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function getSizes(e){return Object.entries(e).filter((function(e){return"min"!==slicedToArray(e,1)[0]})).sort((function(e,t){return e[1]-t[1]}))}var breakpointsType=propTypes.shape({min:propTypes.number,small:propTypes.number,medium:propTypes.number,large:propTypes.number}),MIN_MARGIN=3*GU;function getLayoutSize(e,t){for(var r=getSizes(t),o=r.length;o--;)if(e>=r[o][1])return[r[o][0],r[o][1]-(0===o?0:2*MIN_MARGIN)];return r[0]}function useMergeBreakpoints(e){var t=JSON.stringify(e);return useMemo((function(){return _objectSpread(_objectSpread({},BREAKPOINTS),e)}),[t])}var LayoutContext=React.createContext({});function useLayout(){var e=useContext(LayoutContext),t=e.layoutWidth,r=e.layoutName;return{layoutName:r,layoutWidth:t,name:r,width:t}}function Layout(e){var t=e.breakpoints,r=e.children,o=e.paddingBottom,n=e.parentWidth,i=objectWithoutProperties(e,["breakpoints","children","paddingBottom","parentWidth"]),p=useMergeBreakpoints(t);return React.createElement(LayoutProvider,{parentWidth:n,breakpoints:t},React.createElement(LayoutWidthLimiter,_extends_1({minWidth:p.min,paddingBottom:o},i),r))}function LayoutProvider(e){var t=e.breakpoints,r=e.children,o=e.parentWidth,n=useViewport().width,i=useMergeBreakpoints(t),p=useMemo((function(){return getLayoutSize(void 0===o?n:o,i)}),[n,o,i]),s=slicedToArray(p,2),a=s[0],u=s[1];return React.createElement(LayoutContext.Provider,{value:{layoutWidth:u,layoutName:a}},r)}Layout.propTypes={breakpoints:breakpointsType,children:propTypes.node,paddingBottom:propTypes.oneOfType([propTypes.number,propTypes.string]),parentWidth:propTypes.number},Layout.defaultProps={breakpoints:{},paddingBottom:3*GU},LayoutProvider.propTypes={breakpoints:breakpointsType,children:propTypes.node,parentWidth:propTypes.number},LayoutProvider.defaultProps={breakpoints:{}};var _StyledDiv=_styled("div").withConfig({displayName:"Layout___StyledDiv",componentId:"sc-16bvfls-0"})(["width:",";min-width:","px;margin:0 auto;padding-bottom:",";"],(function(e){return e._css}),(function(e){return e._css2}),(function(e){return e._css3}));function LayoutWidthLimiter(e){var t=e.children,r=e.minWidth,o=e.paddingBottom,n=objectWithoutProperties(e,["children","minWidth","paddingBottom"]),i=useLayout(),p=i.layoutName,s=i.layoutWidth;return React.createElement(_StyledDiv,_extends_1({},n,{_css:"small"===p?"auto":"".concat(s,"px"),_css2:r,_css3:cssPx(o)}),t)}export default Layout;export{LayoutProvider,useLayout};