import _extends_1 from"../../../node_modules/@babel/runtime/helpers/extends.js";import objectWithoutProperties from"../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js";import classCallCheck from"../../../node_modules/@babel/runtime/helpers/classCallCheck.js";import createClass from"../../../node_modules/@babel/runtime/helpers/createClass.js";import assertThisInitialized from"../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js";import inherits from"../../../node_modules/@babel/runtime/helpers/inherits.js";import possibleConstructorReturn from"../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js";import getPrototypeOf from"../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js";import defineProperty from"../../../node_modules/@babel/runtime/helpers/defineProperty.js";import React from"react";import propTypes from"../../../node_modules/prop-types/index.js";import{KEY_ESC}from"../../utils/keycodes.js";import{noop}from"../../utils/miscellaneous.js";function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,s=getPrototypeOf(e);if(t){var o=getPrototypeOf(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var EscapeOutside=function(e){inherits(r,e);var t=_createSuper(r);function r(){var e;classCallCheck(this,r);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o)),defineProperty(assertThisInitialized(e),"_element",React.createRef()),defineProperty(assertThisInitialized(e),"_document",null),defineProperty(assertThisInitialized(e),"handleClick",(function(t){var r=e.props.onEscapeOutside;e._element.contains(t.target)||r()})),defineProperty(assertThisInitialized(e),"handleEscape",(function(t){var r=e.props.onEscapeOutside;t.keyCode===KEY_ESC&&r()})),e}return createClass(r,[{key:"componentDidMount",value:function(){var e=this.props.useCapture;this._document=this._element.ownerDocument,this._document.addEventListener("keydown",this.handleEscape,e),this._document.addEventListener("click",this.handleClick,e),this._document.addEventListener("touchend",this.handleClick,e)}},{key:"componentWillUnmount",value:function(){var e=this.props.useCapture;this._document.removeEventListener("keydown",this.handleEscape,e),this._document.removeEventListener("click",this.handleClick,e),this._document.removeEventListener("touchend",this.handleClick,e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.children;t.onEscapeOutside,t.useCapture;var s=objectWithoutProperties(t,["children","onEscapeOutside","useCapture"]);return React.createElement("div",_extends_1({},s,{ref:function(t){return e._element=t}}),r)}}]),r}(React.Component);defineProperty(EscapeOutside,"propTypes",{children:propTypes.node.isRequired,onEscapeOutside:propTypes.func.isRequired,useCapture:propTypes.bool}),defineProperty(EscapeOutside,"defaultProps",{onEscapeOutside:noop,useCapture:!1});export default EscapeOutside;