import slicedToArray from"../../../node_modules/@babel/runtime/helpers/slicedToArray.js";import _styled from"styled-components";import React,{useState,useCallback}from"react";import propTypes from"../../../node_modules/prop-types/index.js";import{animated as extendedAnimated,Spring}from"../../../node_modules/react-spring/web.js";import reactOnclickout from"../../../node_modules/react-onclickout/index.js";import ButtonBaseWithFocus from"../ButtonBase/ButtonBase.js";import IconEllipsis from"../../icons/components/IconEllipsis.js";import IconDown from"../../icons/components/IconDown.js";import{useTheme}from"../../theme/Theme2.js";import{springs}from"../../style/springs.js";import{RADIUS}from"../../style/constants.js";var BASE_WIDTH=46,BASE_HEIGHT=32,_StyledIconEllipsis=_styled(IconEllipsis).withConfig({displayName:"ContextMenu___StyledIconEllipsis",componentId:"ris724-0"})([""]),_StyledIconDown=_styled(IconDown).withConfig({displayName:"ContextMenu___StyledIconDown",componentId:"ris724-1"})(["color:",";"],(function(e){return e._css7})),_StyledAnimatedDiv=_styled(extendedAnimated.div).withConfig({displayName:"ContextMenu___StyledAnimatedDiv",componentId:"ris724-2"})(["z-index:",";overflow:hidden;position:absolute;top:","px;right:0;background:",";border:1px solid ",";border-radius:3px 0 3px 3px;"],(function(e){return e._css8}),(function(e){return e._css9}),(function(e){return e._css10}),(function(e){return e._css11})),_StyledDiv=_styled("div").withConfig({displayName:"ContextMenu___StyledDiv",componentId:"ris724-3"})(["z-index:",";position:absolute;bottom:0;right:1px;height:1px;width:","px;background:",";"],(function(e){return e._css12}),(function(e){return e._css13}),(function(e){return e._css14}));function ContextMenu(e){var t=e.children,n=e.zIndex,o=e.disabled,s=useTheme(),r=useState(!1),i=slicedToArray(r,2),c=i[0],a=i[1],d=useCallback((function(){a(!1)}),[]),l=useCallback((function(){a((function(e){return!e}))}),[]),u=c?n+1:n;return React.createElement(reactOnclickout,{onClickOut:d},React.createElement(Spring,{config:springs.smooth,to:{openProgress:Number(c)},native:!0},(function(e){var n=e.openProgress;return React.createElement(_StyledMain,{style:{boxShadow:n.interpolate((function(e){return"0 4px 4px rgba(0, 0, 0, ".concat(.03*e,")")}))},_css:u},React.createElement(_StyledButton,{onClick:l,opened:c,disabled:o,focusRingRadius:RADIUS,_css2:o?s.disabledContent:c?s.accent:s.surfaceContent,_css3:o?s.disabled:s.surface,_css4:o?"0":"1px solid ".concat(s.border),_css5:c?s.surface:s.border,_css6:o?"":"&:active {\n                  background: ".concat(s.surfacePressed,";\n                  border-bottom-color: ").concat(c?s.surfacePressed:s.border,";\n                }")},React.createElement(_StyledIconEllipsis,null),React.createElement(extendedAnimated.div,{style:{display:"flex",alignItems:"center",transformOrigin:"50% 50%",transform:n.interpolate((function(e){return"rotate(".concat(180*e,"deg)")}))}},React.createElement(_StyledIconDown,{size:"tiny",_css7:o?s.disabledIcon:s.surfaceIcon}))),c&&React.createElement(React.Fragment,null,React.createElement(_StyledAnimatedDiv,{onClick:d,style:{opacity:n,boxShadow:n.interpolate((function(e){return"0 4px 4px rgba(0, 0, 0, ".concat(.03*e,")")}))},_css8:u+1,_css9:BASE_HEIGHT-1,_css10:s.surface,_css11:s.border},t),React.createElement(_StyledDiv,{_css12:u+1,_css13:BASE_WIDTH-2,_css14:s.surface})))})))}ContextMenu.propTypes={children:propTypes.node,zIndex:propTypes.number,disabled:propTypes.bool},ContextMenu.defaultProps={zIndex:0,disabled:!1};var Main=_styled(extendedAnimated.div).withConfig({displayName:"ContextMenu__Main",componentId:"ris724-4"})(["position:relative;width:","px;height:","px;"],BASE_WIDTH,BASE_HEIGHT),_StyledMain=_styled(Main).withConfig({displayName:"ContextMenu___StyledMain",componentId:"ris724-5"})(["z-index:",";"],(function(e){return e._css})),Button=_styled(ButtonBaseWithFocus).withConfig({displayName:"ContextMenu__Button",componentId:"ris724-6"})(["display:flex;justify-content:center;align-items:center;width:100%;height:","px;border-radius:",";box-shadow:",";"],BASE_HEIGHT,(function(e){return e.opened?"".concat(RADIUS,"px ").concat(RADIUS,"px 0 0"):"".concat(RADIUS,"px")}),(function(e){return e.disabled?"none":"0px 1px 3px rgba(0, 0, 0, 0.1)"})),_StyledButton=_styled(Button).withConfig({displayName:"ContextMenu___StyledButton",componentId:"ris724-7"})(["color:",";background:",";border:",";border-bottom-color:",";",""],(function(e){return e._css2}),(function(e){return e._css3}),(function(e){return e._css4}),(function(e){return e._css5}),(function(e){return e._css6}));export default ContextMenu;