import _extends_1 from"../../../node_modules/@babel/runtime/helpers/extends.js";import objectWithoutProperties from"../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js";import slicedToArray from"../../../node_modules/@babel/runtime/helpers/slicedToArray.js";import _styled from"styled-components";import React,{useRef,useState,useCallback}from"react";import propTypes from"../../../node_modules/prop-types/index.js";import BadgeBase from"../BadgeBase/BadgeBase.js";import TokenBadgePopover from"./TokenBadgePopover.js";import{isAddress,tokenIconUrl}from"../../utils/web3.js";import{warn}from"../../utils/environment.js";import{ImageExists}from"../../hooks/useImageExists.js";import{GU}from"../../style/constants.js";var _StyledSpan=_styled("span").withConfig({displayName:"TokenBadge___StyledSpan",componentId:"sc-7bvdqo-0"})(["position:relative;top:1px;display:flex;flex-shrink:1;min-width:0;margin-left:",";"],(function(e){return e._css})),TokenBadge=React.memo((function(e){var o=e.address,t=e.badgeOnly,s=e.className,n=e.compact,r=e.name,a=e.networkType,p=e.style,c=e.symbol,i=useRef(null),l=useState(!1),d=slicedToArray(l,2),m=d[0],u=d[1],y=useCallback((function(){return u(!1)}),[]),g=useCallback((function(){return u(!0)}),[]),f=isAddress(o),_=f&&"main"===a?tokenIconUrl(o):null,b=r&&c?"".concat(r," (").concat(c,")"):c;return f||warn("TokenBadge: provided invalid address (".concat(o,")")),React.createElement(BadgeBase,{badgeRef:i,className:s,compact:n,disabled:t,icon:React.createElement(ImageExists,{src:_},(function(e){return e.exists&&React.createElement(Icon,{compact:n,src:_})})),label:React.createElement(_StyledSpan,{_css:n?0:"".concat(1*GU,"px")},r&&React.createElement(Name,null,r),React.createElement(_Symbol,null,r?"(".concat(c,")"):c)),onClick:f?g:void 0,style:p,title:"".concat(b," âˆ’ ").concat(o||"No address")},(function(e){return!e&&o&&React.createElement(TokenBadgePopover,{address:o,iconSrc:_,networkType:a,onClose:y,opener:i.current,title:b,visible:m})}))}));TokenBadge.propTypes={address:propTypes.string,badgeOnly:propTypes.bool,className:propTypes.string,compact:propTypes.bool,name:propTypes.string,networkType:propTypes.string,style:propTypes.object,symbol:propTypes.string.isRequired},TokenBadge.defaultProps={address:"",name:"",networkType:"main"};var _StyledSpan2=_styled("span").withConfig({displayName:"TokenBadge___StyledSpan2",componentId:"sc-7bvdqo-1"})(["flex-shrink:0;display:block;width:18px;height:18px;margin:0 ","px 0 ","px;background-size:contain;background-position:50% 50%;background-repeat:no-repeat;background-image:url(",");"],(function(e){return e._css2}),(function(e){return e._css3}),(function(e){return e._css4}));function Icon(e){var o=e.compact,t=e.src,s=objectWithoutProperties(e,["compact","src"]),n=1*GU;return React.createElement(_StyledSpan2,_extends_1({},s,{_css2:o?n:0,_css3:o?0:n,_css4:t}))}Icon.propTypes={compact:propTypes.bool,src:propTypes.string.isRequired};var Name=_styled.span.withConfig({displayName:"TokenBadge__Name",componentId:"sc-7bvdqo-2"})(["flex-shrink:1;overflow:hidden;text-overflow:ellipsis;min-width:20%;margin-right:","px;"],.5*GU),_Symbol=_styled.span.withConfig({displayName:"TokenBadge___Symbol",componentId:"sc-7bvdqo-3"})(["flex-shrink:0;"]);export default TokenBadge;