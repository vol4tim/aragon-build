import _extends_1 from"../../../node_modules/@babel/runtime/helpers/extends.js";import defineProperty from"../../../node_modules/@babel/runtime/helpers/defineProperty.js";import objectWithoutProperties from"../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js";import _styled from"styled-components";import React from"react";import propTypes from"../../../node_modules/prop-types/index.js";import{animated as extendedAnimated,Transition}from"../../../node_modules/react-spring/web.js";import ButtonIcon from"../Button/ButtonIcon.js";import EscapeOutside from"../EscapeOutside/EscapeOutside.js";import RootPortal from"../RootPortal/RootPortal.js";import{useTheme}from"../../theme/Theme2.js";import{useViewport}from"../../providers/Viewport/Viewport.js";import IconCross from"../../icons/components/IconCross.js";import{springs}from"../../style/springs.js";import{cssPx}from"../../utils/css.js";import{RADIUS,GU}from"../../style/constants.js";import{noop}from"../../utils/miscellaneous.js";function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var SPACE_AROUND=4*GU,_StyledAnimatedDiv=_styled(extendedAnimated.div).withConfig({displayName:"Modal___StyledAnimatedDiv",componentId:"sc-1ofisn3-0"})(["position:fixed;top:0;left:0;right:0;bottom:0;background:",";"],(function(e){return e._css})),_StyledAnimatedDiv2=_styled(extendedAnimated.div).withConfig({displayName:"Modal___StyledAnimatedDiv2",componentId:"sc-1ofisn3-1"})(["position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;display:grid;align-items:center;justify-content:center;overflow:auto;"]),_StyledDiv=_styled("div").withConfig({displayName:"Modal___StyledDiv",componentId:"sc-1ofisn3-2"})(["padding:","px 0;"],SPACE_AROUND),_StyledEscapeOutside=_styled(EscapeOutside).withConfig({displayName:"Modal___StyledEscapeOutside",componentId:"sc-1ofisn3-3"})(["position:relative;overflow:hidden;min-width:","px;background:",";box-shadow:0 10px 28px rgba(0,0,0,0.15);"],(function(e){return e._css2}),(function(e){return e._css3})),_StyledButtonIcon=_styled(ButtonIcon).withConfig({displayName:"Modal___StyledButtonIcon",componentId:"sc-1ofisn3-4"})(["position:absolute;z-index:2;top:","px;right:","px;"],(function(e){return e._css4}),(function(e){return e._css5})),_StyledDiv2=_styled("div").withConfig({displayName:"Modal___StyledDiv2",componentId:"sc-1ofisn3-5"})(["position:relative;z-index:1;"]);function Modal(e){var t=e.children,o=e.onClose,n=e.onClosed,s=e.padding,r=e.visible,i=e.width,p=e.closeButton,c=objectWithoutProperties(e,["children","onClose","onClosed","padding","visible","width","closeButton"]),d=useTheme(),l=useViewport();return React.createElement(RootPortal,null,React.createElement(Transition,{native:!0,items:r,from:{opacity:0,scale:.98},enter:{opacity:1,scale:1},leave:{opacity:0,scale:.98},config:_objectSpread(_objectSpread({},springs.smooth),{},{precision:.001}),onDestroyed:function(e){e&&n()}},(function(e){return e&&function(e){var n=e.opacity,a=e.scale;return React.createElement(_StyledAnimatedDiv,_extends_1({style:{opacity:n}},c,{_css:d.overlay.alpha(.9)}),React.createElement(_StyledAnimatedDiv2,{style:{pointerEvents:r?"auto":"none",transform:a.interpolate((function(e){return"scale3d(".concat(e,", ").concat(e,", 1)")}))}},React.createElement(_StyledDiv,null,React.createElement(_StyledEscapeOutside,{role:"alertdialog",useCapture:!0,background:d.surface,onEscapeOutside:o,style:{width:cssPx("function"==typeof i?i(l):i),borderRadius:"".concat(RADIUS,"px")},_css2:360-2*SPACE_AROUND,_css3:d.surface},p&&React.createElement(_StyledButtonIcon,{label:"Close",onClick:o,_css4:2*GU,_css5:2*GU},React.createElement(IconCross,null)),React.createElement(_StyledDiv2,{style:{padding:cssPx("function"==typeof s?s(l):s)}},t)))))}})))}Modal.propTypes={children:propTypes.node.isRequired,closeButton:propTypes.bool,onClose:propTypes.func,onClosed:propTypes.func,padding:propTypes.oneOfType([propTypes.func,propTypes.number,propTypes.string]),visible:propTypes.bool.isRequired,width:propTypes.oneOfType([propTypes.func,propTypes.number,propTypes.string])},Modal.defaultProps={closeButton:!0,onClose:noop,onClosed:noop,padding:3*GU,width:function(e){return Math.min(e.width-2*SPACE_AROUND,600)}};export default Modal;