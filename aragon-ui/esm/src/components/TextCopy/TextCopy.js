import _extends_1 from"../../../node_modules/@babel/runtime/helpers/extends.js";import objectWithoutProperties from"../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js";import _styled from"styled-components";import React,{useRef,useImperativeHandle,useCallback}from"react";import propTypes from"../../../node_modules/prop-types/index.js";import WrapperTextInput from"../Input/TextInput.js";import ButtonIcon from"../Button/ButtonIcon.js";import{useToast}from"../ToastHub/ToastHub.js";import{useTheme}from"../../theme/Theme2.js";import IconCopy from"../../icons/components/IconCopy.js";import{RADIUS,GU}from"../../style/constants.js";import{warn}from"../../utils/environment.js";import{textStyle}from"../../style/text-styles.js";import{noop}from"../../utils/miscellaneous.js";var HEIGHT=5*GU,_StyledDiv=_styled("div").withConfig({displayName:"TextCopy___StyledDiv",componentId:"sc-1dg1uit-0"})(["position:relative;display:inline-flex;width:","px;max-width:100%;height:","px;padding-left:",";"],(function(e){return e._css}),HEIGHT,(function(e){return e._css2})),_StyledDiv2=_styled("div").withConfig({displayName:"TextCopy___StyledDiv2",componentId:"sc-1dg1uit-1"})(["position:absolute;top:0;left:0;overflow:hidden;width:","px;height:","px;background:",";border:1px solid ",";border-right:0;border-radius:","px 0.0001px 0.0001px ","px;"],HEIGHT,HEIGHT,(function(e){return e._css3}),(function(e){return e._css4}),RADIUS,RADIUS),_StyledDiv3=_styled("div").withConfig({displayName:"TextCopy___StyledDiv3",componentId:"sc-1dg1uit-2"})(["display:flex;align-items:center;justify-content:center;width:","px;height:","px;"],(function(e){return e._css5}),(function(e){return e._css6})),_StyledButtonIcon=_styled(ButtonIcon).withConfig({displayName:"TextCopy___StyledButtonIcon",componentId:"sc-1dg1uit-3"})(["width:","px;height:","px;border-radius:0;color:",";"],(function(e){return e._css7}),(function(e){return e._css8}),(function(e){return e._css9})),_StyledTextInput=_styled(WrapperTextInput).withConfig({displayName:"TextCopy___StyledTextInput",componentId:"sc-1dg1uit-4"})(["text-overflow:ellipsis;height:","px;max-width:100%;border:1px solid ",";",";",";&:read-only{color:",";text-shadow:none;}"],HEIGHT,(function(e){return e._css10}),(function(e){return e._css11}),(function(e){return e._css12}),(function(e){return e._css13})),TextCopy=React.memo(React.forwardRef((function(e,t){var o=e.adornment,n=e.autofocus,s=e.message,r=e.monospace,c=e.onCopy,i=e.value,p=objectWithoutProperties(e,["adornment","autofocus","message","monospace","onCopy","value"]),u=useTheme(),d=useToast(),a=useRef(null);useImperativeHandle(t,(function(){return{focus:function(){a.current.focus()}}}));var l=useCallback((function(){a.current&&a.current.select()}),[]),m=void 0===c?d:c||noop,f=useCallback((function(){if(a.current){a.current.focus();try{document.execCommand("copy"),m(s)}catch(e){warn(e)}}}),[s,m]);return React.createElement(_StyledDiv,_extends_1({},p,{_css:52.5*GU,_css2:o?"".concat(HEIGHT,"px"):"0"}),o&&React.createElement(_StyledDiv2,{_css3:u.surface,_css4:u.border},React.createElement(_StyledDiv3,{_css5:HEIGHT-2,_css6:HEIGHT-2},o)),React.createElement(_StyledTextInput,{ref:a,adornment:React.createElement(_StyledButtonIcon,{onClick:f,label:"Copy",_css7:HEIGHT-2,_css8:HEIGHT-2,_css9:u.surfaceIcon},React.createElement(IconCopy,null)),adornmentPosition:"end",adornmentSettings:{width:HEIGHT-2,padding:0},autofocus:n,onFocus:l,readOnly:!0,value:i,wide:!0,_css10:u.border,_css11:o?"\n                  border-top-left-radius: 0;\n                  border-bottom-left-radius: 0;\n                  border-left: 0;\n                ":"",_css12:textStyle(r?"address2":"body3"),_css13:u.surfaceContent}))})));TextCopy.propTypes={adornment:propTypes.node,autofocus:propTypes.bool,message:propTypes.string,monospace:propTypes.bool,onCopy:propTypes.func,value:propTypes.string},TextCopy.defaultProps={autofocus:!1,message:"Copied",monospace:!0};export default TextCopy;