import _extends_1 from"../../../node_modules/@babel/runtime/helpers/extends.js";import slicedToArray from"../../../node_modules/@babel/runtime/helpers/slicedToArray.js";import objectWithoutProperties from"../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js";import _styled from"styled-components";import React,{useRef,useState,useCallback,useEffect,useMemo}from"react";import propTypes from"../../../node_modules/prop-types/index.js";import{animated as extendedAnimated,Spring}from"../../../node_modules/react-spring/web.js";import{useInside as o}from"../../../node_modules/use-inside/dist/index.js";import ButtonBaseWithFocus from"../ButtonBase/ButtonBase.js";import{useTheme}from"../../theme/Theme2.js";import{GU}from"../../style/constants.js";import{springs}from"../../style/springs.js";import{textStyle}from"../../style/text-styles.js";import IconDown from"../../icons/components/IconDown.js";function interpolateToggleElevation(e,t){return e.interpolate((function(e){return t(1-Math.abs(2*e-1))}))}var _StyledSection=_styled("section").withConfig({displayName:"Details___StyledSection",componentId:"b3f99g-0"})(["",""],(function(e){return e._css})),_StyledButtonBase=_styled(ButtonBaseWithFocus).withConfig({displayName:"Details___StyledButtonBase",componentId:"b3f99g-1"})(["position:relative;width:100%;&:active{background:",";}"],(function(e){return e._css2})),_StyledDiv=_styled("div").withConfig({displayName:"Details___StyledDiv",componentId:"b3f99g-2"})(["position:absolute;left:","px;right:","px;bottom:0;"],(function(e){return e._css3}),(function(e){return e._css4})),_StyledDiv2=_styled("div").withConfig({displayName:"Details___StyledDiv2",componentId:"b3f99g-3"})(["height:1px;box-shadow:0 1px 1px rgba(0,0,0,0.1);"]),_StyledH=_styled("h1").withConfig({displayName:"Details___StyledH",componentId:"b3f99g-4"})(["display:flex;justify-content:flex-start;align-items:center;height:","px;margin-left:","px;color:",";"," font-weight:400;"],(function(e){return e._css5}),(function(e){return e._css6}),(function(e){return e._css7}),(function(e){return e._css8})),_StyledDiv3=_styled("div").withConfig({displayName:"Details___StyledDiv3",componentId:"b3f99g-5"})(["margin-top:2px;"]),_StyledDiv4=_styled("div").withConfig({displayName:"Details___StyledDiv4",componentId:"b3f99g-6"})(["display:flex;align-items:center;justify-content:center;"]),_StyledDiv5=_styled("div").withConfig({displayName:"Details___StyledDiv5",componentId:"b3f99g-7"})(["overflow:hidden"]),_StyledAnimatedDiv=_styled(extendedAnimated.div).withConfig({displayName:"Details___StyledAnimatedDiv",componentId:"b3f99g-8"})(["display:flex;flex-direction:column;justify-content:flex-end;"]),_StyledDiv6=_styled("div").withConfig({displayName:"Details___StyledDiv6",componentId:"b3f99g-9"})(["",""],(function(e){return e._css9}));function Details(e){var t=e.children,n=e.label,i=e.onToggle,s=e.opened,r=objectWithoutProperties(e,["children","label","onToggle","opened"]),a=useTheme(),l=o("Box"),c=slicedToArray(l,1)[0],d=o("SidePanel"),p=slicedToArray(d,1)[0],u=useRef(null),m=useRef(0),f=useState(!1),_=slicedToArray(f,2),y=_[0],g=_[1],v=void 0===s?y:s,S=useCallback((function(){u.current&&(m.current=u.current.clientHeight)}),[]),x=useCallback((function(e){u.current=e,S()}),[S]),b=useCallback((function(){var e=!v;void 0===s&&g(e),i&&i(e)}),[i,v,s]),h=useRef(!1);useEffect((function(){h.current=!0}),[]);var D=useState(!1),R=slicedToArray(D,2),E=R[0],T=R[1],j=useCallback((function(){return T(!0)}),[]),w=useCallback((function(){T(!v)}),[v]);useEffect(S,[v,S]);var C=useMemo((function(){return p?{section:"\n          margin: ".concat(2*GU,"px ").concat(-3*GU,"px 0;\n          padding-bottom: ").concat(3*GU,"px;\n        "),content:"\n          padding: ".concat(2*GU,"px ").concat(3*GU,"px 0;\n        ")}:c?{section:"\n          margin: 0 ".concat(-3*GU,"px;\n        "),content:"\n          padding: ".concat(1*GU,"px ").concat(3*GU,"px 0;\n        ")}:{section:"\n        margin: 0;\n        padding-bottom: ".concat(3*GU,"px;\n      "),content:"\n        padding: 0;\n      "}}),[p,c]);return React.createElement(Spring,{config:springs.smooth,from:{openProgress:0},to:{openProgress:Number(v)},immediate:!h,onRest:w,onStart:j,native:!0},(function(e){var o=e.openProgress;return React.createElement(_StyledSection,_extends_1({},r,{_css:C.section}),React.createElement(_StyledButtonBase,{onClick:b,_css2:a.surfacePressed},React.createElement(_StyledDiv,{_css3:3*GU,_css4:3*GU},React.createElement(extendedAnimated.div,{style:{transform:interpolateToggleElevation(o,(function(e){return"scale3d(".concat(e,", 1, 1)")})),opacity:interpolateToggleElevation(o,(function(e){return e}))}},React.createElement(_StyledDiv2,null))),React.createElement(_StyledH,_extends_1({},r,{_css5:5*GU,_css6:3*GU,_css7:a.surfaceContentSecondary,_css8:textStyle("label2")}),React.createElement(_StyledDiv3,null,n),React.createElement("div",null,React.createElement(extendedAnimated.div,{style:{marginLeft:"".concat(1*GU,"px"),transform:o.interpolate((function(e){return"rotate(".concat(180*(1-e),"deg)")})),transformOrigin:"50% calc(50% - 0.5px)"}},React.createElement(_StyledDiv4,null,React.createElement(IconDown,{size:"tiny"})))))),React.createElement(_StyledDiv5,null,React.createElement(_StyledAnimatedDiv,{style:{opacity:o,height:E?o.interpolate((function(e){return"".concat(e*m.current,"px")})):"auto"}},React.createElement(_StyledDiv6,{ref:x,_css9:C.content},React.createElement("div",null,t)))))}))}Details.propTypes={children:propTypes.node.isRequired,label:propTypes.string.isRequired,onToggle:propTypes.func,opened:propTypes.bool};export default Details;