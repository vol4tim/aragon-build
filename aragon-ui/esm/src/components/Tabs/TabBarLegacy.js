import toConsumableArray from"../../../node_modules/@babel/runtime/helpers/toConsumableArray.js";import classCallCheck from"../../../node_modules/@babel/runtime/helpers/classCallCheck.js";import createClass from"../../../node_modules/@babel/runtime/helpers/createClass.js";import assertThisInitialized from"../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js";import inherits from"../../../node_modules/@babel/runtime/helpers/inherits.js";import possibleConstructorReturn from"../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js";import getPrototypeOf from"../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js";import defineProperty from"../../../node_modules/@babel/runtime/helpers/defineProperty.js";import _styled from"styled-components";import React from"react";import propTypes from"../../../node_modules/prop-types/index.js";import{useTheme}from"../../theme/Theme2.js";import{font}from"../../utils/font.js";import{noop}from"../../utils/miscellaneous.js";import{unselectable}from"../../utils/css.js";function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=getPrototypeOf(e);if(t){var o=getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return possibleConstructorReturn(this,n)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var TabBar=function(e){inherits(n,e);var t=_createSuper(n);function n(){var e;classCallCheck(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),defineProperty(assertThisInitialized(e),"state",{displayFocusRing:!1}),defineProperty(assertThisInitialized(e),"_barRef",React.createRef()),defineProperty(assertThisInitialized(e),"handleMouseDown",(function(){e.disableFocusRing()})),defineProperty(assertThisInitialized(e),"handleKeydown",(function(t){var n=t.key;"Enter"===n&&(e.selectElement(document.activeElement),e.enableFocusRing()),"Tab"===n&&e.enableFocusRing()})),defineProperty(assertThisInitialized(e),"handleTabMouseDown",(function(t){var n=t.currentTarget;e.selectElement(n)})),e}return createClass(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeydown)}},{key:"enableFocusRing",value:function(){this.setState({displayFocusRing:!0})}},{key:"disableFocusRing",value:function(){this.setState({displayFocusRing:!1})}},{key:"selectElement",value:function(e){var t=this.props.onChange;if(e&&this._barRef.current){var n=toConsumableArray(this._barRef.current.childNodes).indexOf(e);-1!==n&&t(n)}}},{key:"render",value:function(){var e=this,t=this.state.displayFocusRing,n=this.props,r=n.items,o=n.selected,s=n.inAppBar;return React.createElement("nav",{onMouseDown:this.handleMouseDown},React.createElement(Bar,{ref:this._barRef,border:!s},r.map((function(n,r){return React.createElement(Tab,{key:r,tabIndex:"0",selected:r===o,focusRing:t,onMouseDown:e.handleTabMouseDown},React.createElement(Label,{selected:r===o},n),t&&React.createElement(FocusRing,null))}))))}}]),n}(React.Component);defineProperty(TabBar,"propTypes",{items:propTypes.arrayOf(propTypes.node).isRequired,selected:propTypes.number,onChange:propTypes.func,inAppBar:propTypes.bool}),defineProperty(TabBar,"defaultProps",{selected:0,onChange:noop});var _StyledUl=_styled("ul").withConfig({displayName:"TabBarLegacy___StyledUl",componentId:"sc-1hufqys-0"})(["display:flex;border-bottom:",";"],(function(e){return e._css}));function Bar(e){var t=e.children,n=e.border,r=useTheme();return React.createElement(_StyledUl,{_css:n?"1px solid ".concat(r.border):"0"},t)}var _StyledSpan=_styled("span").withConfig({displayName:"TabBarLegacy___StyledSpan",componentId:"sc-1hufqys-1"})(["display:none;position:absolute;top:-5px;left:-5px;right:-5px;bottom:-5px;border:2px solid ",";border-radius:2px;"],(function(e){return e._css2}));function FocusRing(e){var t=e.children,n=useTheme();return React.createElement(_StyledSpan,{className:"TabBarLegacy-FocusRing",_css2:n.accent},t)}var _StyledLi=_styled("li").withConfig({displayName:"TabBarLegacy___StyledLi",componentId:"sc-1hufqys-2"})(["position:relative;list-style:none;padding:0 30px;cursor:pointer;",";",";&:focus{outline:0;.TabBarLegacy-FocusRing{display:block;}}"],(function(e){return e._css3}),(function(e){return e._css4}));function Tab(e){var t=e.children,n=e.selected;return React.createElement(_StyledLi,{_css3:font({weight:n?"bold":"normal",deprecationNotice:!1}),_css4:unselectable()},t)}var _StyledSpan2=_styled("span").withConfig({displayName:"TabBarLegacy___StyledSpan2",componentId:"sc-1hufqys-3"})(["display:flex;margin-bottom:-1px;padding:5px 0 3px;border-bottom:4px solid ",";"],(function(e){return e._css5}));function Label(e){var t=e.children,n=e.selected,r=useTheme();return React.createElement(_StyledSpan2,{_css5:n?r.accent:"transparent"},t)}export default TabBar;