import _extends_1 from"../../../node_modules/@babel/runtime/helpers/extends.js";import objectWithoutProperties from"../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js";import slicedToArray from"../../../node_modules/@babel/runtime/helpers/slicedToArray.js";import _styled from"styled-components";import React,{useRef,useState,useCallback}from"react";import{animated as extendedAnimated,Transition}from"../../../node_modules/react-spring/web.js";import{useInside as o}from"../../../node_modules/use-inside/dist/index.js";import ButtonBaseWithFocus from"../ButtonBase/ButtonBase.js";import{useTheme}from"../../theme/Theme2.js";import{useFocusLeave}from"../../hooks/useFocusLeave.js";import IconDown from"../../icons/components/IconDown.js";import{KEY_ESC}from"../../utils/keycodes.js";import{GU}from"../../style/constants.js";import{textStyle}from"../../style/text-styles.js";import{springs}from"../../style/springs.js";var _StyledDiv=_styled("div").withConfig({displayName:"TabsFullWidth___StyledDiv",componentId:"sc-1sqpfuf-0"})(["padding-bottom:","px;"],(function(e){return e._css})),_StyledDiv2=_styled("div").withConfig({displayName:"TabsFullWidth___StyledDiv2",componentId:"sc-1sqpfuf-1"})(["position:relative;display:flex;align-items:center;justify-content:space-between;width:100%;height:","px;"],(function(e){return e._css2})),_StyledButtonBase=_styled(ButtonBaseWithFocus).withConfig({displayName:"TabsFullWidth___StyledButtonBase",componentId:"sc-1sqpfuf-2"})(["display:flex;align-items:center;justify-content:space-between;width:100%;height:100%;background:",";border-style:solid;border-color:",";border-top-width:",";border-bottom-width:1px;border-radius:0;",";&:active{","}"],(function(e){return e._css3}),(function(e){return e._css4}),(function(e){return e._css5}),(function(e){return e._css6}),(function(e){return e._css7})),_StyledDiv3=_styled("div").withConfig({displayName:"TabsFullWidth___StyledDiv3",componentId:"sc-1sqpfuf-3"})(["padding-left:","px;"],(function(e){return e._css8})),_StyledDiv4=_styled("div").withConfig({displayName:"TabsFullWidth___StyledDiv4",componentId:"sc-1sqpfuf-4"})(["display:flex;align-items:center;justify-content:center;width:","px;height:100%;color:",";"],(function(e){return e._css9}),(function(e){return e._css10})),_StyledIconDown=_styled(IconDown).withConfig({displayName:"TabsFullWidth___StyledIconDown",componentId:"sc-1sqpfuf-5"})(["transition:transform 150ms ease-in-out;transform:rotate3d(0,0,1,","deg);color:",";"],(function(e){return e._css11}),(function(e){return e._css12})),_StyledAnimatedDiv=_styled(extendedAnimated.div).withConfig({displayName:"TabsFullWidth___StyledAnimatedDiv",componentId:"sc-1sqpfuf-6"})(["position:absolute;z-index:9;top:","px;left:0;right:0;border-bottom:1px solid ",";box-shadow:0px 2px 3px rgba(0,0,0,0.05);background:",";"],(function(e){return e._css13}),(function(e){return e._css14}),(function(e){return e._css15}));function TabsFullWidth(e){var t=e.items,s=e.selected,n=e.onChange,i=useTheme(),c=useRef(null),r=o("SidePanel"),a=slicedToArray(r,1)[0],l=useState(!1),u=slicedToArray(l,2),d=u[0],f=u[1],_=t[s],m=1===t.length,p=useCallback((function(){return f(!1)}),[]),y=useCallback((function(){c.current&&c.current.focus()}),[]),h=useCallback((function(){f((function(e){return!e}))}),[]),b=useCallback((function(e){p(),y(),e!==s&&n(e)}),[s,n,p,y]),v=useFocusLeave(p),g=v.handleFocusLeave,x=v.ref,S=useCallback((function(e){e.keyCode===KEY_ESC&&(p(),y())}),[p,y]);return React.createElement(_StyledDiv,{ref:x,onBlur:g,_css:2*GU},React.createElement(_StyledDiv2,{_css2:8*GU},React.createElement(_StyledButtonBase,{ref:c,disabled:m,onClick:h,_css3:i.surface,_css4:i.border,_css5:a?"0":"1px",_css6:textStyle("body2"),_css7:m?"":"background: ".concat(i.surfacePressed,";")},React.createElement(_StyledDiv3,{_css8:2*GU},_),React.createElement(_StyledDiv4,{_css9:7*GU,_css10:i.surfaceIcon},React.createElement(_StyledIconDown,{_css11:d?180:0,_css12:m?i.disabled:i.surfaceIcon}))),React.createElement(Transition,{items:d,config:springs.swift,from:{y:-1,opacity:0},enter:{y:0,opacity:1},leave:{y:-1,opacity:0},native:!0},(function(e){return e&&function(e){var s=e.opacity,n=e.y;return React.createElement(_StyledAnimatedDiv,{style:{opacity:s,transform:n.interpolate((function(e){return"translate3d(0, ".concat(4*e,"px, 0)")}))},_css13:8*GU,_css14:i.border,_css15:i.surface},React.createElement(Menu,{items:t,onChange:b,onKeyDown:S}))}}))))}var _StyledDiv5=_styled("div").withConfig({displayName:"TabsFullWidth___StyledDiv5",componentId:"sc-1sqpfuf-7"})(["display:flex;flex-direction:column;outline:0;"]);function Menu(e){var t=e.items,s=e.onChange,n=objectWithoutProperties(e,["items","onChange"]),o=useCallback((function(e){e&&e.focus()}),[]);return React.createElement(_StyledDiv5,_extends_1({ref:o,tabIndex:"0"},n),t.map((function(e,t){return React.createElement(MenuItem,{key:t,item:e,index:t,onChange:s})})))}var _StyledButtonBase2=_styled(ButtonBaseWithFocus).withConfig({displayName:"TabsFullWidth___StyledButtonBase2",componentId:"sc-1sqpfuf-8"})(["height:","px;padding-left:","px;text-align:left;",";&:active{background:",";}"],(function(e){return e._css16}),(function(e){return e._css17}),(function(e){return e._css18}),(function(e){return e._css19}));function MenuItem(e){var t=e.item,s=e.index,n=e.onChange,o=useTheme(),i=useCallback((function(){n(s)}),[n,s]);return React.createElement(_StyledButtonBase2,{onClick:i,_css16:8*GU,_css17:2*GU,_css18:textStyle("body2"),_css19:o.surfacePressed},t)}export{TabsFullWidth};