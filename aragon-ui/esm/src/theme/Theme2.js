import slicedToArray from"../../node_modules/@babel/runtime/helpers/slicedToArray.js";import defineProperty from"../../node_modules/@babel/runtime/helpers/defineProperty.js";import React,{useContext,useMemo}from"react";import propTypes from"../../node_modules/prop-types/index.js";import dark from"./theme-dark.js";import light from"./theme-light.js";import{warnOnce}from"../utils/environment.js";import color from"../utils/color.js";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var APPEARANCES=["dark","light"],EMBEDDED_THEMES={dark,light},THEME_DEFAULT="light",RESERVED_KEYS=["_appearance","_name"],DEPRECATED_COLORS=new Map([["error","negative"],["success","positive"]]),COLOR_FALLBACK="#FF00FF";function getTheme(e){var t=validateTheme(e);return null!==t?(warnOnce("theme:theme-invalid:".concat(t),"Theme invalid: ".concat(t,". ")+"Using the theme “".concat(THEME_DEFAULT,"” instead.")),EMBEDDED_THEMES[THEME_DEFAULT]):"string"==typeof e&&EMBEDDED_THEMES[e]?EMBEDDED_THEMES[e]:_objectSpread(_objectSpread({},EMBEDDED_THEMES["dark"===e._appearance?"dark":"light"]),e)}var ThemeContext=React.createContext(prepareTheme(getTheme(THEME_DEFAULT)));function convertThemeColor(e,t){if(RESERVED_KEYS.includes(e))return t;try{return color(t)}catch(e){return color(COLOR_FALLBACK)}}function prepareTheme(e){var t=Object.fromEntries(Object.entries(e).filter((function(e){var t=slicedToArray(e,1)[0];return!!EMBEDDED_THEMES[THEME_DEFAULT][t]||(warnOnce("theme:invalid:".concat(t),"Theme: the color “".concat(t,"” is invalid and will be ignored. ")+"Please check src/theme/theme-light.js in the aragonUI repository for a list of valid colors."),!1)})).map((function(e){var t=slicedToArray(e,2),r=t[0];return[r,convertThemeColor(r,t[1])]})));return new Proxy(t,{get:function(e,t){return DEPRECATED_COLORS.has(t)?(warnOnce("theme:deprecated:".concat(t),"useTheme(): the color “".concat(t,"” has been deprecated and will be removed soon. ")+"Please use “".concat(DEPRECATED_COLORS.get(t),"” instead.")),e[DEPRECATED_COLORS.get(t)]):e[t]?e[t]:(warnOnce("theme:unknown:".concat(t),"useTheme(): the color “".concat(t,"” doesn’t exist in the theme.")),COLOR_FALLBACK)}})}function validateTheme(e){return"string"==typeof e?EMBEDDED_THEMES[e]?null:"the theme “".concat(e,"” doesn’t exist"):e&&!e._name?"the “_name” key of the theme is missing":e&&!APPEARANCES.includes(e._appearance)?"the “_appearance” key of the theme is missing":null}function Theme(e){var t=e.theme,r=e.children;void 0===t&&(t=THEME_DEFAULT);var n=useMemo((function(){return prepareTheme(getTheme(t))}),[t]);return React.createElement(ThemeContext.Provider,{value:n},r)}function useTheme(){return useContext(ThemeContext)}Theme.propTypes={children:propTypes.node,theme:propTypes.oneOfType([propTypes.object,propTypes.string])},Theme.THEME_DEFAULT=THEME_DEFAULT,Theme.EMBEDDED_THEMES=EMBEDDED_THEMES;export{Theme,useTheme};