import classCallCheck from"../../../node_modules/@babel/runtime/helpers/classCallCheck.js";import createClass from"../../../node_modules/@babel/runtime/helpers/createClass.js";import assertThisInitialized from"../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js";import inherits from"../../../node_modules/@babel/runtime/helpers/inherits.js";import possibleConstructorReturn from"../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js";import getPrototypeOf from"../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js";import defineProperty from"../../../node_modules/@babel/runtime/helpers/defineProperty.js";import React from"react";import propTypes from"../../../node_modules/prop-types/index.js";import getDisplayName from"../../../node_modules/react-display-name/lib/getDisplayName.js";function _createSuper(e){var r=_isNativeReflectConstruct();return function(){var t,n=getPrototypeOf(e);if(r){var o=getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Redraw=function(e){inherits(t,e);var r=_createSuper(t);function t(){var e;classCallCheck(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=r.call.apply(r,[this].concat(o)),defineProperty(assertThisInitialized(e),"state",{lastDraw:-1}),defineProperty(assertThisInitialized(e),"draw",(function(){e.raf=requestAnimationFrame(e.draw);var r=e.props.interval,t=e.state.lastDraw,n=Date.now();(-1===t||n-t>r)&&e.setState({lastDraw:Math.round(n/r)*r})})),e}return createClass(t,[{key:"componentDidMount",value:function(){this.raf=null,this.draw()}},{key:"componentWillUnmount",value:function(){this.raf&&cancelAnimationFrame(this.raf)}},{key:"render",value:function(){return this.props.children()}}]),t}(React.PureComponent);defineProperty(Redraw,"propTypes",{interval:propTypes.number,children:propTypes.func.isRequired}),defineProperty(Redraw,"defaultProps",{interval:1e3});var hocWrap=function(e,r){var t=function(t){return React.createElement(Redraw,{interval:r},(function(){return React.createElement(e,t)}))};return t.displayName="Redraw(".concat(getDisplayName(e),")"),t};Redraw.hocWrap=hocWrap;export default Redraw;export{Redraw,hocWrap};