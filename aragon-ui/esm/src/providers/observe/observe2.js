import _extends_1 from"../../../node_modules/@babel/runtime/helpers/extends.js";import classCallCheck from"../../../node_modules/@babel/runtime/helpers/classCallCheck.js";import createClass from"../../../node_modules/@babel/runtime/helpers/createClass.js";import assertThisInitialized from"../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js";import inherits from"../../../node_modules/@babel/runtime/helpers/inherits.js";import possibleConstructorReturn from"../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js";import getPrototypeOf from"../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js";import defineProperty from"../../../node_modules/@babel/runtime/helpers/defineProperty.js";import React from"react";import getDisplayName from"../../../node_modules/react-display-name/lib/getDisplayName.js";import{warnOnce}from"../../utils/environment.js";function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,s=getPrototypeOf(e);if(t){var n=getPrototypeOf(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var observe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var s,n;return n=s=function(s){inherits(o,s);var n=_createSuper(o);function o(){var r;classCallCheck(this,o);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=n.call.apply(n,[this].concat(i)),defineProperty(assertThisInitialized(r),"state",t),defineProperty(assertThisInitialized(r),"subscribe",(function(t){t&&r.setState({subscription:e(t).subscribe((function(e){r.setState(e)}))})})),defineProperty(assertThisInitialized(r),"unsubscribe",(function(){r.state.subscription&&r.state.subscription.unsubscribe()})),r}return createClass(o,[{key:"componentDidMount",value:function(){this.subscribe(this.props.observable)}},{key:"componentWillReceiveProps",value:function(e){var t=e.observable;t!==this.props.observable&&(this.unsubscribe(),this.subscribe(t))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){warnOnce("observe()","observe() is deprecated. If you are using it with @aragon/api, using @aragon/api-react is now recommended instead.");var e=_extends_1({},this.props);return delete e.observable,React.createElement(r,_extends_1({},this.state,e))}}]),o}(React.Component),defineProperty(s,"displayName","Observe(".concat(getDisplayName(r),")")),defineProperty(s,"propTypes",{observable:function(e,t,r){var s=e.observable;if(s&&"function"!=typeof s.subscribe)throw new Error("Invalid prop `observable` supplied to `".concat(r,"` ")+"(wrapped by `observe()`). `observable` must be an RxJS Observable-like object. "+"Given ".concat(s," instead."))}}),n}};export default observe;