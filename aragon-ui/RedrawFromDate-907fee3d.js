"use strict";var getPrototypeOf=require("./getPrototypeOf-55c9e80c.js"),defineProperty=require("./defineProperty-3cad0327.js"),React=require("react"),index=require("./index-37353731.js"),getDisplayName=require("./getDisplayName-7f913e84.js"),dayjs_min=require("./dayjs.min-ac79806e.js"),date=require("./date.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,a=getPrototypeOf.getPrototypeOf(e);if(t){var n=getPrototypeOf.getPrototypeOf(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return getPrototypeOf.possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var EVERY_SECOND=1e3,EVERY_MINUTE=60*EVERY_SECOND,EVERY_HOUR=60*EVERY_MINUTE,getRedrawTime=function(e){var t=date.difference(new Date,e),r=t.days,a=t.hours,n=t.minutes;return a||r?EVERY_HOUR:n>1?EVERY_MINUTE:EVERY_SECOND},RedrawFromDate=function(e){getPrototypeOf.inherits(r,e);var t=_createSuper(r);function r(){var e;getPrototypeOf.classCallCheck(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"state",{redrawTime:EVERY_HOUR,lastDraw:-1}),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"clearInterval",(function(){e.interval&&clearInterval(e.interval)})),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"restartDrawInterval",(function(t){e.clearInterval(),e.interval=setInterval((function(){e.setState({lastDraw:Date.now()});var r=getRedrawTime(e.props.fromDate);r!==t&&e.restartDrawInterval(r)}),t)})),e}return getPrototypeOf.createClass(r,[{key:"componentDidMount",value:function(){var e=this.props.fromDate;e&&this.restartDrawInterval(getRedrawTime(e))}},{key:"componentWillReceiveProps",value:function(e){var t=e.fromDate;!t&&this.props.fromDate?this.clearInterval():dayjs_min.dayjs_min(t).isSame(this.props.fromDate)||this.restartDrawInterval(getRedrawTime(this.props.fromDate))}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"render",value:function(){return this.props.children()}}]),r}(React__default.default.Component);defineProperty.defineProperty(RedrawFromDate,"propTypes",{children:index.propTypes.func.isRequired,fromDate:index.propTypes.oneOfType([index.propTypes.string,index.propTypes.number,index.propTypes.instanceOf(Date)]).isRequired});var hocWrap=function(e){var t=function(t){return React__default.default.createElement(RedrawFromDate,{fromDate:t.fromDate},(function(){return React__default.default.createElement(e,t)}))};return t.propTypes={fromDate:RedrawFromDate.propTypes.fromDate},t.displayName="RedrawFromDate(".concat(getDisplayName.getDisplayName(e),")"),t};RedrawFromDate.hocWrap=hocWrap,exports.RedrawFromDate=RedrawFromDate;