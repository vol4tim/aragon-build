"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=require("./extends-023d783e.js"),slicedToArray=require("./slicedToArray-a8a77f0e.js"),objectWithoutProperties=require("./objectWithoutProperties-c6d3675c.js"),_styled=require("styled-components"),React=require("react"),index$1=require("./index-37353731.js"),web=require("./web-46d746d6.js"),index=require("./index-c33eeeef.js"),ButtonBase=require("./ButtonBase.js"),Theme=require("./Theme.js"),constants=require("./constants.js"),springs=require("./springs.js"),textStyles=require("./text-styles.js"),IconDown=require("./IconDown.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./_commonjsHelpers-1b94f6bc.js"),require("./unsupportedIterableToArray-f175acfa.js"),require("./objectWithoutPropertiesLoose-1af20ad0.js"),require("react-dom"),require("./defineProperty-3cad0327.js"),require("./FocusVisible.js"),require("./getPrototypeOf-55c9e80c.js"),require("./keycodes.js"),require("./css.js"),require("./environment.js"),require("./miscellaneous.js"),require("./theme-dark.js"),require("./theme-light.js"),require("./color.js"),require("./toConsumableArray-cc0d28a9.js"),require("./font.js"),require("./IconPropTypes-b9997416.js");var _styled__default=_interopDefaultLegacy(_styled),React__default=_interopDefaultLegacy(React);function interpolateToggleElevation(e,t){return e.interpolate((function(e){return t(1-Math.abs(2*e-1))}))}var _StyledSection=_styled__default.default("section").withConfig({displayName:"Details___StyledSection",componentId:"b3f99g-0"})(["",""],(function(e){return e._css})),_StyledButtonBase=_styled__default.default(ButtonBase.default).withConfig({displayName:"Details___StyledButtonBase",componentId:"b3f99g-1"})(["position:relative;width:100%;&:active{background:",";}"],(function(e){return e._css2})),_StyledDiv=_styled__default.default("div").withConfig({displayName:"Details___StyledDiv",componentId:"b3f99g-2"})(["position:absolute;left:","px;right:","px;bottom:0;"],(function(e){return e._css3}),(function(e){return e._css4})),_StyledDiv2=_styled__default.default("div").withConfig({displayName:"Details___StyledDiv2",componentId:"b3f99g-3"})(["height:1px;box-shadow:0 1px 1px rgba(0,0,0,0.1);"]),_StyledH=_styled__default.default("h1").withConfig({displayName:"Details___StyledH",componentId:"b3f99g-4"})(["display:flex;justify-content:flex-start;align-items:center;height:","px;margin-left:","px;color:",";"," font-weight:400;"],(function(e){return e._css5}),(function(e){return e._css6}),(function(e){return e._css7}),(function(e){return e._css8})),_StyledDiv3=_styled__default.default("div").withConfig({displayName:"Details___StyledDiv3",componentId:"b3f99g-5"})(["margin-top:2px;"]),_StyledDiv4=_styled__default.default("div").withConfig({displayName:"Details___StyledDiv4",componentId:"b3f99g-6"})(["display:flex;align-items:center;justify-content:center;"]),_StyledDiv5=_styled__default.default("div").withConfig({displayName:"Details___StyledDiv5",componentId:"b3f99g-7"})(["overflow:hidden"]),_StyledAnimatedDiv=_styled__default.default(web.extendedAnimated.div).withConfig({displayName:"Details___StyledAnimatedDiv",componentId:"b3f99g-8"})(["display:flex;flex-direction:column;justify-content:flex-end;"]),_StyledDiv6=_styled__default.default("div").withConfig({displayName:"Details___StyledDiv6",componentId:"b3f99g-9"})(["",""],(function(e){return e._css9}));function Details(e){var t=e.children,n=e.label,a=e.onToggle,i=e.opened,r=objectWithoutProperties.objectWithoutProperties(e,["children","label","onToggle","opened"]),s=Theme.useTheme(),o=index.o("Box"),l=slicedToArray.slicedToArray(o,1)[0],c=index.o("SidePanel"),d=slicedToArray.slicedToArray(c,1)[0],u=React.useRef(null),_=React.useRef(0),f=React.useState(!1),p=slicedToArray.slicedToArray(f,2),y=p[0],m=p[1],g=void 0===i?y:i,x=React.useCallback((function(){u.current&&(_.current=u.current.clientHeight)}),[]),v=React.useCallback((function(e){u.current=e,x()}),[x]),b=React.useCallback((function(){var e=!g;void 0===i&&m(e),a&&a(e)}),[a,g,i]),S=React.useRef(!1);React.useEffect((function(){S.current=!0}),[]);var h=React.useState(!1),D=slicedToArray.slicedToArray(h,2),j=D[0],R=D[1],q=React.useCallback((function(){return R(!0)}),[]),T=React.useCallback((function(){R(!g)}),[g]);React.useEffect(x,[g,x]);var w=React.useMemo((function(){return d?{section:"\n          margin: ".concat(2*constants.GU,"px ").concat(-3*constants.GU,"px 0;\n          padding-bottom: ").concat(3*constants.GU,"px;\n        "),content:"\n          padding: ".concat(2*constants.GU,"px ").concat(3*constants.GU,"px 0;\n        ")}:l?{section:"\n          margin: 0 ".concat(-3*constants.GU,"px;\n        "),content:"\n          padding: ".concat(1*constants.GU,"px ").concat(3*constants.GU,"px 0;\n        ")}:{section:"\n        margin: 0;\n        padding-bottom: ".concat(3*constants.GU,"px;\n      "),content:"\n        padding: 0;\n      "}}),[d,l]);return React__default.default.createElement(web.Spring,{config:springs.springs.smooth,from:{openProgress:0},to:{openProgress:Number(g)},immediate:!S,onRest:T,onStart:q,native:!0},(function(e){var a=e.openProgress;return React__default.default.createElement(_StyledSection,_extends._extends_1({},r,{_css:w.section}),React__default.default.createElement(_StyledButtonBase,{onClick:b,_css2:s.surfacePressed},React__default.default.createElement(_StyledDiv,{_css3:3*constants.GU,_css4:3*constants.GU},React__default.default.createElement(web.extendedAnimated.div,{style:{transform:interpolateToggleElevation(a,(function(e){return"scale3d(".concat(e,", 1, 1)")})),opacity:interpolateToggleElevation(a,(function(e){return e}))}},React__default.default.createElement(_StyledDiv2,null))),React__default.default.createElement(_StyledH,_extends._extends_1({},r,{_css5:5*constants.GU,_css6:3*constants.GU,_css7:s.surfaceContentSecondary,_css8:textStyles.textStyle("label2")}),React__default.default.createElement(_StyledDiv3,null,n),React__default.default.createElement("div",null,React__default.default.createElement(web.extendedAnimated.div,{style:{marginLeft:"".concat(1*constants.GU,"px"),transform:a.interpolate((function(e){return"rotate(".concat(180*(1-e),"deg)")})),transformOrigin:"50% calc(50% - 0.5px)"}},React__default.default.createElement(_StyledDiv4,null,React__default.default.createElement(IconDown.default,{size:"tiny"})))))),React__default.default.createElement(_StyledDiv5,null,React__default.default.createElement(_StyledAnimatedDiv,{style:{opacity:a,height:j?a.interpolate((function(e){return"".concat(e*_.current,"px")})):"auto"}},React__default.default.createElement(_StyledDiv6,{ref:v,_css9:w.content},React__default.default.createElement("div",null,t)))))}))}Details.propTypes={children:index$1.propTypes.node.isRequired,label:index$1.propTypes.string.isRequired,onToggle:index$1.propTypes.func,opened:index$1.propTypes.bool},exports.default=Details;