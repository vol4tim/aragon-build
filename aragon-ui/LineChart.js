"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=require("./extends-023d783e.js"),toConsumableArray=require("./toConsumableArray-cc0d28a9.js"),objectWithoutProperties=require("./objectWithoutProperties-c6d3675c.js"),slicedToArray=require("./slicedToArray-a8a77f0e.js"),_styled=require("styled-components"),React=require("react"),web=require("./web-46d746d6.js"),proptypes=require("./proptypes-316e1def.js"),css=require("./css.js"),springs=require("./springs.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./_commonjsHelpers-1b94f6bc.js"),require("./unsupportedIterableToArray-f175acfa.js"),require("./objectWithoutPropertiesLoose-1af20ad0.js"),require("react-dom"),require("./defineProperty-3cad0327.js"),require("./index-37353731.js");var _styled__default=_interopDefaultLegacy(_styled),React__default=_interopDefaultLegacy(React),LABELS_HEIGHT=30,WIDTH_DEFAULT=300;function useMeasuredWidth(){var e=React.useRef(),t=React.useState(WIDTH_DEFAULT),r=slicedToArray.slicedToArray(t,2),a=r[0],n=r[1],o=React.useCallback((function(){e.current&&n(e.current.clientWidth)}),[]),s=React.useCallback((function(t){e.current=t,o()}),[o]);return React.useEffect((function(){return window.addEventListener("resize",o),function(){return window.removeEventListener("resize",o)}}),[o]),[a,s]}var _StyledSvg=_styled__default.default("svg").withConfig({displayName:"LineChart___StyledSvg",componentId:"sc-8kiakb-0"})(["display:block"]),_StyledText=_styled__default.default("text").withConfig({displayName:"LineChart___StyledText",componentId:"sc-8kiakb-1"})(["alignment-baseline:middle;font-size:12px;font-weight:300;",";"],css.unselectable);function LineChart(e){var t=e.animDelay,r=e.borderColor,a=e.color,n=e.dotRadius,o=e.height,s=e.label,l=e.labelColor,p=e.lines,d=e.reset,i=e.springConfig,u=e.total,c=e.width,y=objectWithoutProperties.objectWithoutProperties(e,["animDelay","borderColor","color","dotRadius","height","label","labelColor","lines","reset","springConfig","total","width"]),f=useMeasuredWidth(),_=slicedToArray.slicedToArray(f,2),m=_[0],b=_[1],h=React.useMemo((function(){return p.map((function(e){return Array.isArray(e)?{values:e}:e}))}),[p]),E=React.useMemo((function(){return h[0]?h[0].values.length:0}),[h]),g=React.useMemo((function(){return u>0&&u>E?u:E}),[E,u]),x=React.useCallback((function(e){return m/Math.max(1,g-1)*e}),[m,g]),T=React.useCallback((function(e,t,r){var a=n+2;return r-a-(r-2*a)*e*t}),[n]),R=React.useCallback((function(e,t){return 0===e?"start":e===t-1?"end":"middle"}),[]),C=s&&g>0?toConsumableArray.toConsumableArray(Array(g).keys()).map(s):null,P=o-(C?LABELS_HEIGHT:0),k=React__default.default.createElement("rect",{width:m,height:P,rx:"3",ry:"3",fill:"#ffffff",strokeWidth:"1",stroke:r});return React__default.default.createElement(web.Spring,{from:{progress:0},to:{progress:1},config:i,delay:t,reset:d},(function(e){var t=e.progress;return React__default.default.createElement(_StyledSvg,_extends._extends_1({ref:b,viewBox:"0 0 ".concat(m," ").concat(o),width:c||"auto",height:"auto"},y),React__default.default.createElement("mask",{id:"chart-mask"},k),k,React__default.default.createElement("g",{mask:"url(#chart-mask)"},g>0&&React__default.default.createElement("path",{d:"\n                  ".concat(toConsumableArray.toConsumableArray(new Array(g-1)).reduce((function(e,t,r){return"".concat(e," M ").concat(x(r),",").concat(P," l 0,-8")}),""),"\n                "),stroke:r,strokeWidth:"1"}),h.map((function(e,r){return React__default.default.createElement("g",{key:"line-plot-".concat(e.id||r)},React__default.default.createElement("path",{d:"\n                    M\n                    ".concat(x(0),",\n                    ").concat(T(e.values[0],t,P),"\n\n                    ").concat(e.values.slice(1).map((function(e,r){return"L\n                           ".concat(x((r+1)*t),",\n                           ").concat(T(e,t,P),"\n                          ")})).join(""),"\n                  "),fill:"transparent",stroke:e.color||a(r,{lines:h}),strokeWidth:"2"}),e.values.slice(1,-1).map((function(o,s){return React__default.default.createElement("circle",{key:s,cx:x(s+1)*t,cy:T(o,t,P),r:n,fill:"white",stroke:e.color||a(r,{lines:h}),strokeWidth:"1"})})))})),React__default.default.createElement("line",{x1:x(E-1)*t,y1:"0",x2:x(E-1)*t,y2:P,stroke:"#DAEAEF",strokeWidth:"3"})),C&&React__default.default.createElement("g",{transform:"translate(0,".concat(P,")")},C.map((function(e,t){return React__default.default.createElement(_StyledText,{key:t,x:x(t),y:LABELS_HEIGHT/2,textAnchor:R(t,C.length),fill:l},e)}))))}))}LineChart.propTypes={springConfig:proptypes.ExtendedPropTypes._spring,total:proptypes.ExtendedPropTypes.number,width:proptypes.ExtendedPropTypes.number,height:proptypes.ExtendedPropTypes.number,dotRadius:proptypes.ExtendedPropTypes.number,animDelay:proptypes.ExtendedPropTypes.number,borderColor:proptypes.ExtendedPropTypes.string,labelColor:proptypes.ExtendedPropTypes.string,reset:proptypes.ExtendedPropTypes.bool,lines:proptypes.ExtendedPropTypes.arrayOf(proptypes.ExtendedPropTypes.oneOfType([proptypes.ExtendedPropTypes.shape({id:proptypes.ExtendedPropTypes.number,values:proptypes.ExtendedPropTypes.arrayOf(proptypes.ExtendedPropTypes.number).isRequired,color:proptypes.ExtendedPropTypes.string}),proptypes.ExtendedPropTypes.arrayOf(proptypes.ExtendedPropTypes.number)])),label:proptypes.ExtendedPropTypes.oneOfType([proptypes.ExtendedPropTypes.func,proptypes.ExtendedPropTypes._null]),color:proptypes.ExtendedPropTypes.func},LineChart.defaultProps={springConfig:springs.springs.lazy,total:-1,height:200,dotRadius:3.5,animDelay:500,reset:!1,borderColor:"rgba(209, 209, 209, 0.5)",labelColor:"#6d777b",lines:[],label:function(e){return e+1},color:function(e,t){var r=t.lines;return"hsl(".concat((e*(360/r.length)+40)%360,", 60%, 70%)")}},exports.default=LineChart;