"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var toConsumableArray=require("./toConsumableArray-cc0d28a9.js"),getPrototypeOf=require("./getPrototypeOf-55c9e80c.js"),defineProperty=require("./defineProperty-3cad0327.js"),_styled=require("styled-components"),React=require("react"),index=require("./index-37353731.js"),Theme=require("./Theme.js"),font=require("./font.js"),miscellaneous=require("./miscellaneous.js"),css=require("./css.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("./unsupportedIterableToArray-f175acfa.js"),require("./_commonjsHelpers-1b94f6bc.js"),require("./slicedToArray-a8a77f0e.js"),require("./theme-dark.js"),require("./theme-light.js"),require("./environment.js"),require("./color.js");var _styled__default=_interopDefaultLegacy(_styled),React__default=_interopDefaultLegacy(React);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=getPrototypeOf.getPrototypeOf(e);if(t){var a=getPrototypeOf.getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return getPrototypeOf.possibleConstructorReturn(this,r)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var TabBar=function(e){getPrototypeOf.inherits(r,e);var t=_createSuper(r);function r(){var e;getPrototypeOf.classCallCheck(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"state",{displayFocusRing:!1}),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"_barRef",React__default.default.createRef()),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"handleMouseDown",(function(){e.disableFocusRing()})),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"handleKeydown",(function(t){var r=t.key;"Enter"===r&&(e.selectElement(document.activeElement),e.enableFocusRing()),"Tab"===r&&e.enableFocusRing()})),defineProperty.defineProperty(getPrototypeOf.assertThisInitialized(e),"handleTabMouseDown",(function(t){var r=t.currentTarget;e.selectElement(r)})),e}return getPrototypeOf.createClass(r,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeydown)}},{key:"enableFocusRing",value:function(){this.setState({displayFocusRing:!0})}},{key:"disableFocusRing",value:function(){this.setState({displayFocusRing:!1})}},{key:"selectElement",value:function(e){var t=this.props.onChange;if(e&&this._barRef.current){var r=toConsumableArray.toConsumableArray(this._barRef.current.childNodes).indexOf(e);-1!==r&&t(r)}}},{key:"render",value:function(){var e=this,t=this.state.displayFocusRing,r=this.props,n=r.items,a=r.selected,o=r.inAppBar;return React__default.default.createElement("nav",{onMouseDown:this.handleMouseDown},React__default.default.createElement(Bar,{ref:this._barRef,border:!o},n.map((function(r,n){return React__default.default.createElement(Tab,{key:n,tabIndex:"0",selected:n===a,focusRing:t,onMouseDown:e.handleTabMouseDown},React__default.default.createElement(Label,{selected:n===a},r),t&&React__default.default.createElement(FocusRing,null))}))))}}]),r}(React__default.default.Component);defineProperty.defineProperty(TabBar,"propTypes",{items:index.propTypes.arrayOf(index.propTypes.node).isRequired,selected:index.propTypes.number,onChange:index.propTypes.func,inAppBar:index.propTypes.bool}),defineProperty.defineProperty(TabBar,"defaultProps",{selected:0,onChange:miscellaneous.noop});var _StyledUl=_styled__default.default("ul").withConfig({displayName:"TabBarLegacy___StyledUl",componentId:"sc-1hufqys-0"})(["display:flex;border-bottom:",";"],(function(e){return e._css}));function Bar(e){var t=e.children,r=e.border,n=Theme.useTheme();return React__default.default.createElement(_StyledUl,{_css:r?"1px solid ".concat(n.border):"0"},t)}var _StyledSpan=_styled__default.default("span").withConfig({displayName:"TabBarLegacy___StyledSpan",componentId:"sc-1hufqys-1"})(["display:none;position:absolute;top:-5px;left:-5px;right:-5px;bottom:-5px;border:2px solid ",";border-radius:2px;"],(function(e){return e._css2}));function FocusRing(e){var t=e.children,r=Theme.useTheme();return React__default.default.createElement(_StyledSpan,{className:"TabBarLegacy-FocusRing",_css2:r.accent},t)}var _StyledLi=_styled__default.default("li").withConfig({displayName:"TabBarLegacy___StyledLi",componentId:"sc-1hufqys-2"})(["position:relative;list-style:none;padding:0 30px;cursor:pointer;",";",";&:focus{outline:0;.TabBarLegacy-FocusRing{display:block;}}"],(function(e){return e._css3}),(function(e){return e._css4}));function Tab(e){var t=e.children,r=e.selected;return React__default.default.createElement(_StyledLi,{_css3:font.font({weight:r?"bold":"normal",deprecationNotice:!1}),_css4:css.unselectable()},t)}var _StyledSpan2=_styled__default.default("span").withConfig({displayName:"TabBarLegacy___StyledSpan2",componentId:"sc-1hufqys-3"})(["display:flex;margin-bottom:-1px;padding:5px 0 3px;border-bottom:4px solid ",";"],(function(e){return e._css5}));function Label(e){var t=e.children,r=e.selected,n=Theme.useTheme();return React__default.default.createElement(_StyledSpan2,{_css5:r?n.accent:"transparent"},t)}exports.default=TabBar;