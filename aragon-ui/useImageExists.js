"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var slicedToArray=require("./slicedToArray-a8a77f0e.js"),React=require("react");require("./unsupportedIterableToArray-f175acfa.js");var A_DAY=864e5;function cachedMap(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expireAfter,r=void 0===t?A_DAY:t,a=e.size,s=void 0===a?100:a,n=new Map;function c(e,t,r){n.delete(e),n.set(e,{value:t,lastAccess:r}),n.size>s&&n.delete(n.keys().next().value)}return{clear:function(){return n.clear()},delete:function(e){return n.delete(e)},get:function(e){var t=new Date,a=n.get(e);return a?t-a.lastAccess>r?(n.delete(e),null):(c(e,a.value,t),a.value):null},set:function(e,t){c(e,t,new Date)}}}var srcCache=cachedMap();function useImageExists(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=React.useState(!1),a=slicedToArray.slicedToArray(r,2),s=a[0],n=a[1],c=React.useState(!0),i=slicedToArray.slicedToArray(c,2),u=i[0],l=i[1],o=React.useState(!1),d=slicedToArray.slicedToArray(o,2),f=d[0],v=d[1];return React.useEffect((function(){var r=new Image,a=setTimeout((function(){return v(!0)}),t),s=function(){l(!1),n(!0),srcCache.set(e,!0),c()},c=function(){clearTimeout(a),r&&(r.removeEventListener("load",s),r=null)};return function(){if(!e)return n(!1),void l(!1);srcCache.get(e)?s():(n(!1),l(!0),r.addEventListener("load",s),r.src=e)}(),c}),[e,t]),React.useMemo((function(){return{src:e,displayFallback:f,exists:s,loading:u}}),[e,f,s,u])}var ImageExists=function(e){var t=e.timeUntilFallback,r=e.src;return(0,e.children)(useImageExists(r,t))};exports.ImageExists=ImageExists,exports.useImageExists=useImageExists;